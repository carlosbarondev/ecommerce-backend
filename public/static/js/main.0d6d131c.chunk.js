(this["webpackJsonpecommerce-frontend"]=this["webpackJsonpecommerce-frontend"]||[]).push([[0],{197:function(e,t,a){},330:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var c=a(37),r=a.n(c),n=(a(197),a(198),a(199),a(9)),s=a(13),i=a(72),o=a(169),l=a(2),d="[ui] Change step",j="[ui] Change menu canvas",b="[ui] Change cart canvas",u="[ui] Change category canvas",m="[ui] Change backdrop",x="[ui] Change shipping modal",h="[ui] Shipping modal elegir",O="[auth] Login",p="[auth] Finish checking login state",f="[auth] Logout",g="[auth] Change Name",v="[auth] Change Image",N="[cart] Init cart",y="[cart] Add cart",k="[cart] Delete cart",C="[cart] Logout",w="[shipping] Init shipping",_="[shipping] Set active shipping",S="[shipping] Set default shipping",E="[shipping] Add new shipping",I="[shipping] Update shipping",T="[shipping] Delete shipping",P="[shipping] Sort shipping",D="[shipping] Init billing",F="[shipping] Add billing",z="[shipping] Update billing",A="[shipping] Delete billing",q={step:2,menuCanvas:!1,cartCanvas:!1,categoryCanvas:!1,backdrop:!0,shippingModal:!1,elegirShippingModal:null},H={checking:!0},R=a(17),B={carrito:[]},M={envio:[],facturacion:{},activo:null,predeterminado:null},L=Object(i.b)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},e),{},{step:t.payload});case j:return Object(l.a)(Object(l.a)({},e),{},{menuCanvas:!e.menuCanvas});case b:return Object(l.a)(Object(l.a)({},e),{},{cartCanvas:!e.cartCanvas});case u:return Object(l.a)(Object(l.a)({},e),{},{categoryCanvas:!e.categoryCanvas});case m:return Object(l.a)(Object(l.a)({},e),{},{backdrop:t.payload});case x:return Object(l.a)(Object(l.a)({},e),{},{shippingModal:t.payload});case h:return Object(l.a)(Object(l.a)({},e),{},{elegirShippingModal:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(l.a)(Object(l.a)(Object(l.a)({},e),t.payload),{},{checking:!1});case p:return Object(l.a)(Object(l.a)({},e),{},{checking:!1});case f:return{checking:!1};case g:return Object(l.a)(Object(l.a)({},e),{},{nombre:t.payload,checking:!1});case v:return Object(l.a)(Object(l.a)({},e),{},{img:t.payload,checking:!1});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{carrito:t.payload};case y:return-1===t.payload.productIndex?Object(l.a)(Object(l.a)({},e),{},{carrito:[].concat(Object(R.a)(e.carrito),[t.payload.product])}):(e.carrito[t.payload.productIndex].unidades=t.payload.product.unidades,Object(l.a)({},e));case k:return Object(l.a)(Object(l.a)({},e),{},{carrito:e.carrito.filter((function(e){return e.producto._id!==t.payload}))});case C:return{carrito:[]};default:return e}},shipping:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{envio:t.payload};case D:return{facturacion:t.payload};case _:return Object(l.a)(Object(l.a)({},e),{},{activo:t.payload});case S:return Object(l.a)(Object(l.a)({},e),{},{predeterminado:t.payload});case E:return Object(l.a)(Object(l.a)({},e),{},{envio:[].concat(Object(R.a)(e.envio),[t.payload])});case I:return Object(l.a)(Object(l.a)({},e),{},{envio:e.envio.map((function(e){return e._id===t.payload._id?t.payload:e}))});case T:return Object(l.a)(Object(l.a)({},e),{},{envio:e.envio.filter((function(e){return e._id!==t.payload}))});case P:return Object(l.a)(Object(l.a)({},e),{},{envio:t.payload});case F:case z:return Object(l.a)(Object(l.a)({},e),{},{facturacion:t.payload});case A:return Object(l.a)(Object(l.a)({},e),{},{facturacion:null});default:return e}}}),V="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,U=Object(i.d)(L,V(Object(i.a)(o.a))),G=a(1),W=a(18),J=a(3),K=a(6),Y=a(14),Z=a(100),$=a(175),Q=a(177),X=a(178),ee=a(339),te=a(340),ae=a(176),ce=a(341),re=a(5),ne=a.n(re),se=a(12),ie=a(4),oe=a.n(ie),le=a(10),de="https://ecommerce-carlosbarondev.herokuapp.com",je=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(de,"/").concat(e);return"GET"===a?fetch(c):fetch(c,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},be=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="".concat(de,"/").concat(e),n=localStorage.getItem("token")||"";return"GET"===a?fetch(r,{method:a,headers:{"x-token":n}}):fetch(r,{method:a,headers:c?{"x-token":n}:{"Content-type":"application/json","x-token":n},body:c?t:JSON.stringify(t)})},ue=function(e){return{type:d,payload:e}},me=function(){return{type:j}},xe=function(){return{type:b}},he=function(){return{type:u}},Oe=function(e){return{type:m,payload:e}},pe=function(e){return{type:x,payload:e}},fe=function(e){return{type:h,payload:e}},ge=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(c,r){var n=r().cart.carrito.findIndex((function(t){return t.producto._id===e._id}));if(c(ve(-1===n?{unidades:t,producto:e}:{unidades:t},n)),!a){c(Oe(!1)),c(xe());var s=setInterval((function(){c(xe()),c(Oe(!0)),clearInterval(s)}),1500)}}},ve=function(e,t){return{type:y,payload:{product:e,productIndex:t}}},Ne=function(){return{type:C}},ye=function(e){return{type:O,payload:e}},ke=function(){return{type:p}},Ce=function(){return{type:f}},we=function(e){return{type:g,payload:e}},_e=function(e){return{type:v,payload:e}},Se=a(0),Ee=["label"],Ie=function(e){var t=e.label,a=Object(K.a)(e,Ee),c=Object(Y.c)(a),r=Object(J.a)(c,2),n=r[0],s=r[1];return Object(Se.jsxs)(Z.a,{className:"mb-2",children:[Object(Se.jsx)($.a,{htmlFor:a.id||a.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({},n),a)),s.touched&&s.error?Object(Se.jsx)(X.a,{className:"text-danger",children:s.error}):null]})},Te=function(){var e=Object(n.b)(),t=Object(W.h)(),a=function(e){var t=document.querySelector("input[name=".concat(e,"]"));"password"===t.type?t.type="text":t.type="password"};return Object(Se.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(Se.jsx)("div",{className:"text-center",children:Object(Se.jsx)(ee.a,{src:"/assets/logo_grande.png",alt:"logo",className:"mt-3 mt-sm-5 mb-0 mb-sm-4",style:{cursor:"pointer",maxWidth:"75%"},onClick:function(){return t("/")},fluid:!0})}),Object(Se.jsx)(Y.b,{initialValues:{nombre:"",email:"",password:"",password2:""},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(20,"20 caracteres como m\xe1ximo").required("El nombre es obligatorio"),email:se.c().email("El email es inv\xe1lido").required("El email es obligatorio"),password:se.c().min(6,"6 caracteres como m\xednimo").max(15,"15 caracteres como m\xe1ximo").required("La contrase\xf1a es obligatoria"),password2:se.c().min(6,"6 caracteres como m\xednimo").max(15,"15 caracteres como m\xe1ximo").required("La contrase\xf1a es obligatoria")}),onSubmit:function(a){var c=a.nombre,r=a.email,n=a.password;if(n!==a.password2)return ne.a.fire("Error","Las contrase\xf1as no coinciden","error");e(function(e,t,a,c){return function(){var r=Object(le.a)(oe.a.mark((function r(n){var s,i,o,l,d,j,b;return oe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,je("usuarios",{nombre:e,correo:t,password:a},"POST");case 2:return s=r.sent,r.next=5,s.json();case 5:if((i=r.sent).msg){r.next=31;break}return r.next=9,je("login",{correo:t,password:a},"POST");case 9:return o=r.sent,r.next=12,o.json();case 12:if((l=r.sent).msg){r.next=28;break}return r.next=16,je("login",{correo:t,password:a},"POST");case 16:return d=r.sent,r.next=19,d.json();case 19:j=r.sent,localStorage.setItem("token",j.token),localStorage.setItem("token-init-date",(new Date).getTime()),localStorage.setItem("uid",j.usuario._id),n(ye({uid:j.usuario._id,nombre:j.usuario.nombre,correo:j.usuario.correo,rol:j.usuario.rol,img:j.usuario.img,estado:j.usuario.estado})),b=localStorage.getItem("lastPath")||"/",c(b,{replace:!0}),r.next=29;break;case 28:ne.a.fire("Error",l.msg,"error");case 29:r.next=32;break;case 31:ne.a.fire("Error",i.msg,"error");case 32:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(c,r,n,t))},children:Object(Se.jsxs)(Y.a,{className:"d-grid gap-2 mt-4 mb-5 mx-4",children:[Object(Se.jsx)("h1",{children:"Crear cuenta"}),Object(Se.jsx)(Ie,{label:"Nombre",name:"nombre",type:"text",placeholder:"\xbfCu\xe1l es tu nombre?"}),Object(Se.jsx)(Ie,{label:"E-mail",name:"email",type:"text",placeholder:"E-mail"}),Object(Se.jsxs)(te.a,{className:"mb-3",children:[Object(Se.jsxs)(ae.a,{xs:12,sm:6,className:"mt-3 mt-sm-0",children:[Object(Se.jsx)(Ie,{label:"Contrase\xf1a",name:"password",type:"password",placeholder:"Contrase\xf1a"}),Object(Se.jsxs)("div",{className:"form-check",children:[Object(Se.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",onClick:function(){return a("password")}}),Object(Se.jsx)("label",{className:"form-check-label",htmlFor:"flexCheckDefault",children:"Mostrar contrase\xf1a"})]})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:6,className:"mt-3 mt-sm-0",children:[Object(Se.jsx)(Ie,{label:"Confirma tu contrase\xf1a",name:"password2",type:"password",placeholder:"Contrase\xf1a"}),Object(Se.jsxs)("div",{className:"form-check",children:[Object(Se.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault2",onClick:function(){return a("password2")}}),Object(Se.jsx)("label",{className:"form-check-label",htmlFor:"flexCheckDefault2",children:"Mostrar contrase\xf1a"})]})]})]}),Object(Se.jsx)(ce.a,{type:"submit",variant:"primary",size:"lg",children:"Crear cuenta"}),Object(Se.jsxs)("div",{className:"position-relative my-2 text-center",children:[Object(Se.jsx)("hr",{}),Object(Se.jsx)("p",{className:"position-absolute top-50 start-50 translate-middle bg-white px-3",children:"Ya tengo una cuenta"})]}),Object(Se.jsx)(ce.a,{type:"button",variant:"outline-primary",size:"lg",onClick:function(){t("/login")},children:"Iniciar sesi\xf3n"})]})})]})},Pe=a(351),De=["label"],Fe=function(e){var t=e.label,a=Object(K.a)(e,De),c=Object(Y.c)(a),r=Object(J.a)(c,2),n=r[0],s=r[1];return Object(Se.jsxs)(Z.a,{className:"mb-2",children:[Object(Se.jsx)($.a,{htmlFor:a.id||a.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({},n),a)),s.touched&&s.error?Object(Se.jsx)(X.a,{className:"text-danger",children:s.error}):null]})},ze=function(){var e=Object(n.b)(),t=Object(W.h)();return Object(Se.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(Se.jsx)("div",{className:"text-center",children:Object(Se.jsx)(ee.a,{src:"/assets/logo_grande.png",alt:"logo",className:"mt-5 mb-5",style:{cursor:"pointer",maxWidth:"75%"},onClick:function(){return t("/")},fluid:!0})}),Object(Se.jsxs)(te.a,{className:"mb-5",children:[Object(Se.jsxs)(ae.a,{xs:12,lg:5,className:"d-flex flex-column align-items-center order-2 order-lg-1",children:[Object(Se.jsx)("h4",{className:"mt-5",children:"Usuarios disponibles"}),Object(Se.jsxs)(Pe.a,{className:"mt-3",children:[Object(Se.jsxs)(Pe.a.Item,{className:"border-0",children:[Object(Se.jsx)("i",{className:"fa-solid fa-user-gear fa-xl"}),Object(Se.jsx)("b",{children:" Administrador"}),Object(Se.jsxs)("div",{className:"mt-2 ms-4",children:["E-mail: ",Object(Se.jsx)("span",{className:"text-primary",children:"admin@ecommerce.com"})]}),Object(Se.jsxs)("div",{className:"ms-4",children:["Contrase\xf1a: ",Object(Se.jsx)("span",{className:"text-primary",children:"123456"})]})]}),Object(Se.jsxs)(Pe.a.Item,{className:"border-0",children:[Object(Se.jsx)("i",{className:"fa-solid fa-user-plus fa-xl"}),Object(Se.jsx)("b",{children:" Cliente"}),Object(Se.jsx)("div",{className:"mt-2 ms-2",children:"\xa1Crea un nuevo cliente desde cero!"})]})]})]}),Object(Se.jsx)(ae.a,{xs:0,lg:1,className:"disable-vr order-2",children:Object(Se.jsx)("div",{className:"vr h-100"})}),Object(Se.jsx)(ae.a,{xs:12,lg:6,className:"d-flex flex-column align-items-center order-1 order-lg-3",children:Object(Se.jsx)(Y.b,{initialValues:{email:"",password:""},validationSchema:se.b({email:se.c().email("El email es inv\xe1lido").required("El email es obligatorio"),password:se.c().min(6,"6 caracteres como m\xednimo").max(15,"15 caracteres como m\xe1ximo").required("La contrase\xf1a es obligatoria")}),onSubmit:function(a){e(function(e,t,a){return function(){var c=Object(le.a)(oe.a.mark((function c(r){var n,s,i;return oe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,je("login",{correo:e,password:t},"POST");case 2:return n=c.sent,c.next=5,n.json();case 5:(s=c.sent).msg?ne.a.fire("Error",s.msg,"error"):(localStorage.setItem("token",s.token),localStorage.setItem("token-init-date",(new Date).getTime()),localStorage.setItem("uid",s.usuario._id),r(ye({uid:s.usuario._id,nombre:s.usuario.nombre,correo:s.usuario.correo,rol:s.usuario.rol,img:s.usuario.img,estado:s.usuario.estado})),i=localStorage.getItem("lastPath")||"/",a(i,{replace:!0}));case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(a.email,a.password,t))},children:Object(Se.jsxs)(Y.a,{className:"auth-box-container d-grid gap-2",children:[Object(Se.jsx)("h1",{children:"Iniciar sesi\xf3n"}),Object(Se.jsx)(Fe,{label:"E-mail",name:"email",type:"text",placeholder:"E-mail"}),Object(Se.jsx)(Fe,{label:"Contrase\xf1a",name:"password",type:"password",placeholder:"Contrase\xf1a"}),Object(Se.jsxs)("div",{className:"form-check",style:{marginTop:"-8px"},children:[Object(Se.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",onClick:function(){return function(e){var t=document.querySelector("input[name=".concat(e,"]"));"password"===t.type?t.type="text":t.type="password"}("password")}}),Object(Se.jsx)("label",{className:"form-check-label",htmlFor:"flexCheckDefault",children:"Mostrar contrase\xf1a"})]}),Object(Se.jsx)(ce.a,{className:"mt-2",type:"submit",variant:"primary",size:"lg",children:"Iniciar sesi\xf3n"}),Object(Se.jsxs)("div",{className:"position-relative my-2 text-center",children:[Object(Se.jsx)("hr",{}),Object(Se.jsx)("p",{className:"position-absolute top-50 start-50 translate-middle bg-white px-3",children:"\xbfEres nuevo cliente?"})]}),Object(Se.jsx)(ce.a,{type:"button",variant:"outline-primary",size:"lg",onClick:function(){t("/registro")},children:"Crear cuenta"})]})})})]})]})},Ae=a(342),qe=a(347),He=a(179),Re=a(44),Be=a.n(Re),Me=a(189),Le=function(){var e=Object(n.b)(),t=Object(W.h)(),a=Object(n.c)((function(e){return e.ui})).menuCanvas,c=Object(n.c)((function(e){return e.auth})),r=c.nombre,s=c.rol,i=c.img;return Object(Se.jsxs)(Me.a,{show:a,onHide:function(){return e(me())},placement:"end",scroll:!0,backdrop:!0,children:[Object(Se.jsx)(Me.a.Header,{className:"canvasCategoryTitle",closeButton:!0,closeVariant:"white",children:Object(Se.jsx)(Me.a.Title,{children:Object(Se.jsxs)("div",{className:"d-flex align-items-center",children:["ADMIN_ROLE"!==s?i?Object(Se.jsx)("div",{className:"ms-2 me-3",children:Object(Se.jsx)(Be.a,{image:i||"/assets/no-image.png",roundedColor:"#49c1e1",imageWidth:"50",imageHeight:"50",roundedSize:"2",borderRadius:"15"})}):Object(Se.jsx)("i",{className:"fa-solid fa-circle-user fa-xl ms-3 me-3"}):Object(Se.jsx)("i",{className:"fa-solid fa-user-gear fa-xl ms-3 me-3"}),r?"Hola, ".concat(r):Object(Se.jsx)("span",{onClick:function(){t("/login"),e(me())},children:"Hola, Identif\xedcate"})]})})}),Object(Se.jsxs)(Me.a.Body,{children:["USER_ROLE"===s?Object(Se.jsxs)(Pe.a,{className:"animate__animated animate__fadeInRight animate__faster",children:[Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/datos"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-user-pen fa-lg me-2"})}),"Mis datos"]})}),Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/pedidos"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-truck-fast fa-lg me-2"})}),"Pedidos"]})}),Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/valoraciones"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-star fa-lg me-2"})}),"Valoraciones"]})}),Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/deseos"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-gifts fa-lg me-2"})}),"Lista de deseos"]})})]}):Object(Se.jsxs)(Pe.a,{className:"animate__animated animate__fadeInRight animate__faster",children:[Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/usuarios"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-user-pen fa-lg me-2"})}),"Gesti\xf3n de usuarios"]})}),Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/categorias"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-gifts fa-lg me-2"})}),"Gesti\xf3n de categor\xedas"]})}),Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){t("/panel/productos"),e(me())},children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-gift fa-lg me-2"})}),"Gesti\xf3n de productos"]})})]}),Object(Se.jsx)("div",{className:"d-grid gap-2",children:Object(Se.jsxs)(ce.a,{variant:"danger",className:"mt-3",onClick:function(){e((function(e){localStorage.clear(),e(Ce()),e(Ne())})),e(me()),t("/")},children:[Object(Se.jsx)("i",{className:"fa-solid fa-right-from-bracket"})," Cerrar sesi\xf3n"]})})]})]})},Ve=a(7),Ue=function(){var e=Object(W.h)(),t=Object(n.b)(),a=Object(n.c)((function(e){return e.cart})).carrito,c=Object(n.c)((function(e){return e.ui})),r=c.cartCanvas,i=c.backdrop,o=function(){return t(xe())};return Object(Se.jsxs)(Me.a,{show:r,onHide:o,placement:"end",backdrop:i,scroll:!0,children:[Object(Se.jsx)(Me.a.Header,{className:"canvasCategoryTitle",closeButton:!0,closeVariant:"white",children:Object(Se.jsx)(Me.a.Title,{children:Object(Se.jsx)("div",{className:"ms-2",children:"MI CARRITO"})})}),Object(Se.jsxs)(Me.a.Body,{children:[a.length>0?Object(Se.jsxs)("div",{className:"mb-4",children:[Object(Se.jsxs)("h5",{children:["Unidades",Object(Se.jsx)("span",{className:"float-end",children:a.length>0?a.reduce((function(e,t){return e+t.unidades}),0):0})]}),Object(Se.jsxs)("h4",{children:["TOTAL",Object(Se.jsxs)("span",{className:"float-end",children:[a.reduce((function(e,t){return e+t.unidades*t.producto.precio}),0).toFixed(2)," \u20ac"]})]}),Object(Se.jsx)("div",{className:"d-grid gap-2 mt-4",children:Object(Se.jsx)(ce.a,{className:"mb-2",variant:"warning",size:"lg",onClick:function(){e("/cart"),o()},children:"Realizar Pedido"})}),Object(Se.jsx)("hr",{})]}):null,a.length>0?a.map((function(e){return Object(Se.jsxs)("div",{className:"row d-flex align-items-center",children:[Object(Se.jsx)("div",{className:"col-4 text-center",children:Object(Se.jsx)("img",{src:e.producto.img?e.producto.img:"/assets/no-image.png",alt:e.producto.nombre,className:"img-thumbnail",style:{maxHeight:"8rem"}})}),Object(Se.jsxs)("div",{className:"col-8",children:[Object(Se.jsx)(s.b,{className:"linkProducto",onClick:o,style:{fontSize:"20px"},to:"/".concat(Object(Ve.a)(e.producto.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.nombre.replace(/\s+/g,"-"))),children:e.producto.nombre}),Object(Se.jsx)("div",{children:Object(Se.jsxs)("b",{children:["Unidades: ",e.unidades]})}),Object(Se.jsx)("div",{children:Object(Se.jsxs)("b",{children:[(e.producto.precio*e.unidades).toFixed(2)," \u20ac"]})})]}),Object(Se.jsx)("hr",{className:"my-3"})]},e.producto._id)})):"No hay art\xedculos en tu carrito"]})]})},Ge=function(){var e=Object(W.h)(),t=Object(n.b)(),a=Object(n.c)((function(e){return e.ui})),c=a.categoryCanvas,r=a.backdrop,s=Object(n.c)((function(e){return e.auth})),i=s.nombre,o=s.rol,l=s.img,d=Object(G.useState)(),j=Object(J.a)(d,2),b=j[0],u=j[1],m=Object(G.useState)(1),x=Object(J.a)(m,2),h=x[0],O=x[1],p=Object(G.useState)(),f=Object(J.a)(p,2),g=f[0],v=f[1],N=Object(G.useState)(!1),y=Object(J.a)(N,2),k=y[0],C=y[1];Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je("categorias");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,u(a.categorias),C(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var w=function(a){e("/".concat(Object(Ve.a)(b[g].nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(a.replace(/\s+/g,"-")))),t(he()),O(1)};return k&&Object(Se.jsxs)(Me.a,{show:c,onHide:function(){t(he()),O(1)},backdrop:r,scroll:!0,children:[Object(Se.jsx)(Me.a.Header,{className:"canvasCategoryTitle",closeButton:!0,closeVariant:"white",children:Object(Se.jsx)(Me.a.Title,{children:Object(Se.jsxs)("div",{className:"d-flex align-items-center",children:["ADMIN_ROLE"!==o?l?Object(Se.jsx)("div",{className:"ms-2 me-3",children:Object(Se.jsx)(Be.a,{image:l||"/assets/no-image.png",roundedColor:"#49c1e1",imageWidth:"50",imageHeight:"50",roundedSize:"2",borderRadius:"15"})}):Object(Se.jsx)("i",{className:"fa-solid fa-circle-user fa-xl ms-3 me-3"}):Object(Se.jsx)("i",{className:"fa-solid fa-user-gear fa-xl ms-3 me-3"}),i?"Hola, ".concat(i):Object(Se.jsx)("span",{onClick:function(){e("/login"),t(he())},children:"Hola, Identif\xedcate"})]})})}),Object(Se.jsx)(Me.a.Body,{children:1===h?Object(Se.jsxs)("div",{children:[Object(Se.jsx)("div",{className:"mb-3",children:Object(Se.jsx)("strong",{children:"CATEGOR\xcdAS"})}),Object(Se.jsx)(Pe.a,{className:"animate__animated animate__fadeInLeft",children:b.map((function(e){return Object(Se.jsxs)(Pe.a.Item,{className:"border-0 d-flex align-items-center canvasCategoryHover",action:!0,onClick:function(){return function(e){var t=b.findIndex((function(t){return t._id===e}));v(t),O(2)}(e._id)},children:[e.nombre,Object(Se.jsx)("i",{className:"fa-solid fa-angle-right ms-auto canvasCategoryArrow"})]},e._id)}))})]}):Object(Se.jsxs)("div",{children:[Object(Se.jsx)("div",{className:"mb-3 d-flex align-items-center",style:{cursor:"pointer"},onClick:function(){return O(1)},children:Object(Se.jsxs)("b",{children:[Object(Se.jsx)("i",{className:"fa-solid fa-arrow-left mx-3"}),"MEN\xda PRINCIPAL"]})}),Object(Se.jsxs)(Pe.a,{className:"animate__animated animate__fadeInRight animate__faster",children:[Object(Se.jsxs)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){return w("")},children:["Todo en ",b[g].nombre]},"all"),b[g].subcategorias.map((function(e){return Object(Se.jsx)(Pe.a.Item,{className:"border-0 canvasCategoryHover",action:!0,onClick:function(){return w(e.nombre)},children:e.nombre},e._id)}))]})]})})]})},We=a(180),Je=function(){var e=Object(W.h)(),t=Object(G.useState)([]),a=Object(J.a)(t,2),c=a[0],r=a[1],n=Object(G.useState)(""),s=Object(J.a)(n,2),i=s[0],o=s[1];Object(G.useEffect)((function(){function e(){return e=Object(le.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je("productos");case 3:return t=e.sent,e.next=6,t.json();case 6:e.sent.productos.forEach((function(e){var t={id:e._id,_id:e._id,name:e.nombre,nombre:e.nombre,categoria:e.categoria,subcategoria:e.subcategoria,img:e.img,precio:e.precio};r((function(e){return e.concat(t)}))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(Se.jsx)("div",{style:{width:"100%"},children:Object(Se.jsx)(We.ReactSearchAutocomplete,{items:c,onSearch:function(t,a){""!==t&&(o(t),document.querySelector("input").addEventListener("keyup",(function(c){"Enter"===c.key&&(c.preventDefault(),c.target.blur(),o(""),e("/buscar/".concat(t),{state:{nombre:t,busqueda:a},replace:!0}))})))},onSelect:function(t){o(""),e("/".concat(Object(Ve.a)(t.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(t.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(t.name.replace(/\s+/g,"-"))))},formatResult:function(e){var t=c.find((function(t){return t.name===e}));return Object(Se.jsxs)("div",{children:[Object(Se.jsx)("b",{children:e}),Object(Se.jsx)("span",{style:{color:"grey"},children:" en ".concat(t.categoria.nombre)})]})},placeholder:"Busca en Ecommerce...",inputSearchString:i,styling:{borderRadius:"5px",height:"35px",iconColor:"black",placeholderColor:"#ADADAD"}})})},Ke=[{path:"/:CategoriaNombre/:SubCategoriaNombre/:ProductoNombre",breadcrumb:null},{path:"/cart",breadcrumb:"Carrito"},{path:"/panel",breadcrumb:"Panel"},{path:"/panel/datos",breadcrumb:null},{path:"/panel/deseos",breadcrumb:"Deseados"},{path:"/buscar",breadcrumb:null},{path:"/buscar/:Busqueda",breadcrumb:null}],Ye=function(){var e=Object(W.h)(),t=Object(n.b)(),a=Object(W.g)(),c=Object(n.c)((function(e){return e.auth})),r=c.nombre,i=c.uid,o=c.rol,l=c.img,d=Object(n.c)((function(e){return e.cart})),j=d.carrito,b=Object(He.a)(Ke);Object(G.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(d))}),[d]);return Object(Se.jsxs)(qe.a,{sticky:"top",bg:"light",style:{padding:"0",margin:"0"},children:[Object(Se.jsxs)(Ae.a,{className:"d-flex flex-column",style:{padding:"0",margin:"0"},fluid:!0,children:[Object(Se.jsxs)(Ae.a,{className:"d-flex align-items-center",style:{height:"55px"},fluid:!0,children:[Object(Se.jsxs)(qe.a.Brand,{className:"ms-2 ms-md-4 me-4 me-md-5",children:[Object(Se.jsx)(ee.a,{className:"navbarDisableImg",style:{height:"55px",cursor:"pointer"},alt:"logo",src:"/assets/logo_grande.png",onClick:function(){return e("/")}}),Object(Se.jsx)(ee.a,{className:"navbarEnableImg",style:{height:"55px",cursor:"pointer"},alt:"logo",src:"/assets/logo.png",onClick:function(){return e("/")}})]}),Object(Se.jsx)("div",{className:"d-flex flex-grow-1 ms-md-2 me-3 me-md-5",children:Object(Se.jsx)(Je,{})}),!!i&&Object(Se.jsxs)("div",{className:"d-flex align-items-center h-100 hoverFondo me-md-4 px-2 px-md-3",style:{cursor:"pointer"},onClick:function(){return t(me())},children:["USER_ROLE"===o?l?Object(Se.jsx)(Be.a,{image:l||"/assets/no-image.png",roundedColor:"#49c1e1",imageWidth:"50",imageHeight:"50",roundedSize:"2",borderRadius:"15"}):Object(Se.jsx)("div",{children:Object(Se.jsx)("i",{className:"fas fa-user",style:{fontSize:"30px"}})}):Object(Se.jsx)("i",{className:"fa-solid fa-user-gear",style:{fontSize:"30px"}}),Object(Se.jsxs)("div",{className:"navbarDisable ms-2",children:[Object(Se.jsx)("div",{style:{marginBottom:"-5px"},children:"Hola ".concat(r)}),"USER_ROLE"===o?Object(Se.jsx)("b",{children:"Mi Cuenta"}):Object(Se.jsx)("b",{children:"Panel de Administraci\xf3n"})]})]},"in")||!i&&Object(Se.jsxs)("div",{className:"d-flex align-items-center h-100 hoverFondo me-md-4 px-2 px-md-3",style:{cursor:"pointer"},onClick:function(){return e("/login")},children:[Object(Se.jsx)("i",{className:"fas fa-sign-in-alt",style:{fontSize:"30px"}}),Object(Se.jsx)("b",{className:"navbarDisable ms-2",children:"Identif\xedcate"})]},"out"),Object(Se.jsxs)("div",{className:"d-flex align-items-center h-100 hoverFondo me-md-3 px-2 px-md-3",style:{cursor:"pointer"},onClick:function(){return t(xe())},children:[Object(Se.jsxs)("span",{className:"fa-layers fa-fw",style:{fontSize:"40px"},children:[Object(Se.jsx)("i",{className:"fas fa-shopping-cart"}),Object(Se.jsx)("span",{className:"fa-layers-counter",style:{background:"Tomato",fontSize:"50px"},children:j.length>0?j.reduce((function(e,t){return e+t.unidades}),0):0})]}),Object(Se.jsx)("b",{className:"navbarDisable ms-1",children:"Mi Carrito"})]})]}),Object(Se.jsxs)(Ae.a,{className:"d-flex align-items-center border-top border-bottom",style:{height:"35px",fontSize:"14px"},fluid:!0,children:[Object(Se.jsxs)("button",{className:"border-0 ms-2 ms-md-5 me-3 h-100 hoverFondo px-3",style:{backgroundColor:"#F8F9FA"},onClick:function(){return t(he())},children:[Object(Se.jsx)("i",{className:"fa-solid fa-bars fa-lg"}),Object(Se.jsx)("b",{className:"ms-2 navbarDisable",children:"Todas las categor\xedas"})]}),"/"!==a.pathname&&"/summary"!==a.pathname&&"/buscar"!==a.pathname&&b.map((function(e,t){var a=e.match,c=e.breadcrumb;return Object(Se.jsxs)("span",{children:[Object(Se.jsx)(s.c,{to:a.pathname,className:"linkNormal",children:c}),t<b.length-1&&Object(Se.jsx)("span",{className:"ms-1 me-1",children:">"})]},a.pathname)})),"ADMIN_ROLE"!==o?Object(Se.jsx)(s.b,{className:"linkNormal ms-auto me-5 navbarDisable",to:"/panel/deseos",children:"Lista de deseos"}):null]})]}),Object(Se.jsx)(Le,{}),Object(Se.jsx)(Ue,{}),Object(Se.jsx)(Ge,{})]})},Ze=a(52),$e=function(){var e=Object(W.i)().ProductoNombre,t=Object(n.b)(),a=Object(W.h)(),c=Object(n.c)((function(e){return e.auth})).uid,r=Object(n.c)((function(e){return e.cart})).carrito,s=Object(G.useState)(),i=Object(J.a)(s,2),o=i[0],l=i[1],d=Object(G.useState)(1),j=Object(J.a)(d,2),b=j[0],u=j[1],m=Object(G.useState)(!1),x=Object(J.a)(m,2),h=x[0],O=x[1],p={year:"numeric",month:"long",day:"numeric"};Object(G.useEffect)((function(){function t(){return(t=Object(le.a)(oe.a.mark((function t(){var c,r;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,je("productos/producto/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:(r=t.sent).msg?(console.log(r.msg),a("/")):(l(r.producto),O(!0)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),a("/");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,a]);var f=function(){o.estado?o.stock>0?b>0&&(b<=o.stock?t(ge(o,b)):ne.a.fire("Escasez de stock","Su pedido es mayor al stock del art\xedculo","warning")):ne.a.fire("Art\xedculo agotado","El art\xedculo estar\xe1 disponible pr\xf3ximamente","warning"):ne.a.fire("Art\xedculo descatalogado","El art\xedculo ya no est\xe1 disponible","warning")},g=function(){var e=Object(le.a)(oe.a.mark((function e(t){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("usuarios/deseos/".concat(c),{deseos:t},"POST");case 3:return a=e.sent,e.next=6,a.json();case 6:if(!e.sent.msg){e.next=11;break}return e.abrupt("return",ne.a.fire("Inicia sesi\xf3n","Identif\xedcate para a\xf1adir el art\xedculo a tu lista de deseos","warning"));case 11:return e.abrupt("return",ne.a.fire("Art\xedculo a\xf1adido a tu lista","Accede a tu lista de deseos para organizar tus compras","success"));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0,"error"));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return h&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(Se.jsxs)("div",{className:"row mt-5",children:[Object(Se.jsx)("div",{className:"col-12 col-lg-5 text-center",children:Object(Se.jsx)(ee.a,{src:o.img?o.img:"/assets/no-image.png",alt:o.nombre,className:"animate__animated animate__fadeInLeft mb-5 mb-lg-0 imagenDetalleProducto",fluid:!0})}),Object(Se.jsxs)("div",{className:"col-12 col-lg-7",children:[Object(Se.jsx)("h3",{children:o.nombre}),Object(Se.jsxs)("div",{className:"d-flex align-items-center",children:[Object(Se.jsx)(Ze.Rating,{className:"me-2 mb-1",style:{pointerEvents:"none"},size:20,ratingValue:o.rating,allowHover:!1}),Object(Se.jsx)("div",{children:o.opinion.length>0?Object(Se.jsx)("a",{className:"linkNormal text-muted",href:"#stars",children:1===o.opinion.length?"".concat(o.opinion.length," valoraci\xf3n"):"".concat(o.opinion.length," valoraciones")}):"Sin valoraciones"})]}),Object(Se.jsx)("h4",{className:"mt-2 mb-3",children:Object(Se.jsxs)("b",{children:[o.precio," \u20ac"]})}),Object(Se.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(Se.jsxs)("li",{className:"list-group-item",children:[Object(Se.jsx)("div",{className:"fw-bold",children:"Detalles del producto"}),Object(Se.jsx)("div",{className:"mt-2 ms-4 mb-2",style:{whiteSpace:"pre-wrap"},children:o.descripcion})]}),Object(Se.jsxs)("li",{className:"list-group-item",children:[Object(Se.jsx)("span",{className:"fw-bold",children:"Stock: "}),o.estado?o.stock>0?"".concat(o.stock," unidades"):Object(Se.jsx)("span",{className:"p-1 rounded",style:{backgroundColor:"#cc0000",color:"white",fontWeight:"bolder"},children:"Producto agotado"}):Object(Se.jsx)("span",{className:"p-1 rounded",style:{backgroundColor:"#cc0000",color:"white",fontWeight:"bolder"},children:"Producto descatalogado"})]})]}),Object(Se.jsxs)("div",{className:"input-group mt-3 mb-1",children:[Object(Se.jsx)("button",{onClick:function(){b>=2&&u(b-1)},className:"border",style:{height:"30px",width:"30px",marginLeft:"auto"},children:"-"}),Object(Se.jsx)("input",{className:"text-center border",type:"text",value:b,onChange:function(e){return function(e){u(e>0?e:0)}(parseInt(e.target.value))},style:{height:"30px",width:"30px"}}),Object(Se.jsx)("button",{onClick:function(){return u(b+1)},className:"border",style:{height:"30px",width:"30px",marginRight:"auto"},children:"+"})]}),Object(Se.jsxs)("div",{className:"d-flex gap-2 mt-4",children:[Object(Se.jsx)(ce.a,{className:"flex-fill",variant:"outline-danger",size:"lg",onClick:function(){return g(o._id)},children:Object(Se.jsx)("i",{className:"fa-solid fa-heart"})}),Object(Se.jsx)("div",{className:"flex-fill buttonDisable2",children:Object(Se.jsxs)(ce.a,{className:"flex-fill",variant:"outline-dark",size:"lg",onClick:f,children:[Object(Se.jsx)("i",{className:"fa-solid fa-cart-plus"})," A\xf1adir al carrito"]})}),Object(Se.jsx)("div",{className:"flex-fill buttonDisable",children:Object(Se.jsxs)(ce.a,{className:"flex-fill",variant:"outline-dark",size:"lg",onClick:f,children:[Object(Se.jsx)("i",{className:"fa-solid fa-cart-plus"})," A\xf1adir"]})}),Object(Se.jsxs)(ce.a,{className:"flex-fill",variant:"warning",size:"lg",onClick:function(){if(o.estado)if(o.stock>0){if(b>0)if(b<=o.stock){var e,c=r.findIndex((function(e){return e.producto._id===o._id}));void 0===(null===(e=r[c])||void 0===e?void 0:e.unidades)&&t(ge(o,b,!0)),a("/cart")}else ne.a.fire("Escasez de stock","Su pedido es mayor al stock del art\xedculo","warning")}else ne.a.fire("Art\xedculo agotado","El art\xedculo estar\xe1 disponible pr\xf3ximamente","warning");else ne.a.fire("Art\xedculo descatalogado","El art\xedculo ya no est\xe1 disponible","warning")},children:["Comprar ",Object(Se.jsx)("i",{className:"fa-solid fa-share"})]})]})]})]}),Object(Se.jsx)("hr",{className:"mt-5 mb-5"}),Object(Se.jsxs)("div",{className:"mb-5 ms-2 ms-sm-0",children:[Object(Se.jsxs)("div",{className:"mb-5",children:[Object(Se.jsx)("h4",{id:"stars",style:{display:"inline"},className:"me-3 align-middle",children:"Valoraciones (".concat(o.opinion.length,")")}),Object(Se.jsx)(Ze.Rating,{className:"mt-2 mt-sm-1 me-3",showTooltip:!0,tooltipDefaultText:"El art\xedculo no tiene comentarios",tooltipArray:["Muy malo","Malo","Bueno","Muy bueno","Excelente"],tooltipStyle:{background:"#00A3C8",fontSize:"20px",margin:"0",marginTop:"6px"},style:{pointerEvents:"none"},size:30,ratingValue:o.rating,allowHover:!1})]}),o.opinion.map((function(e,t){return e.usuario.estado&&Object(Se.jsxs)("div",{className:"row mt-2",children:[Object(Se.jsx)("div",{className:"col-sm-12 col-md-4",children:Object(Se.jsxs)("div",{className:"row",children:[Object(Se.jsx)("div",{className:"col-2",children:"ADMIN_ROLE"!==e.usuario.rol?e.usuario.img?Object(Se.jsx)("div",{className:"ms-2 me-3",children:Object(Se.jsx)(Be.a,{image:e.usuario.img?e.usuario.img:"/assets/no-image.png",roundedColor:"#49c1e1",imageWidth:"50",imageHeight:"50",roundedSize:"2",borderRadius:"15"})}):Object(Se.jsx)("div",{className:"circulo ms-2 me-3",children:Object(Se.jsx)("i",{className:"fa-solid fa-user fa-lg"})}):Object(Se.jsx)("div",{className:"circulo ms-2 me-3",children:Object(Se.jsx)("i",{className:"fa-solid fa-user-gear fa-lg"})})}),Object(Se.jsx)("div",{className:"col-10 d-flex align-items-center",children:Object(Se.jsx)("div",{className:"ms-2",style:{fontSize:"20px"},children:"".concat(e.usuario.nombre)})})]})}),Object(Se.jsxs)("div",{className:"col-sm-12 col-md-8 mt-sm-2 mt-md-0",children:[Object(Se.jsxs)("div",{className:"comentarios",children:[Object(Se.jsx)(Ze.Rating,{style:{pointerEvents:"none",marginRight:"8px"},size:20,ratingValue:e.rating,allowHover:!1}),Object(Se.jsx)("div",{style:{fontSize:"16px"},children:Object(Se.jsx)("b",{children:"".concat(e.titulo)})})]}),Object(Se.jsx)("div",{style:{fontSize:"14px"},children:"".concat(new Date(e.fecha).toLocaleDateString("es-ES",p))}),Object(Se.jsx)("div",{className:"mt-3",children:"".concat(e.comentario)})]}),t!==o.opinion.length-1&&Object(Se.jsx)("hr",{className:"mt-4"})]},e._id)}))]})]})},Qe=a(350),Xe=function(e){var t=Object(W.h)(),a=e.nombre,c=e.precio,r=e.img,n=e.categoria,s=e.subcategoria;return Object(Se.jsx)(Qe.a,{className:"cardProduct",onClick:function(){return t("/".concat(Object(Ve.a)(n.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(s.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(a.replace(/\s+/g,"-"))))},children:Object(Se.jsxs)("div",{className:"d-flex flex-column",children:[Object(Se.jsx)("div",{className:"border-section",children:Object(Se.jsx)(ee.a,{className:"imagenCentrar",src:r||"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(Qe.a.Body,{className:"d-flex justify-content-center",children:[Object(Se.jsx)(Qe.a.Text,{className:"cardName text-muted",children:a.charAt(0).toUpperCase()+a.slice(1)}),Object(Se.jsx)(Qe.a.Title,{className:"cardPrice",children:Object(Se.jsxs)("b",{children:[c," \u20ac"]})})]})]})})},et=function(e){var t=e.desde,a=e.limite,c=e.ordenar,r=Object(G.useState)(),n=Object(J.a)(r,2),s=n[0],i=n[1],o=Object(G.useState)(!1),d=Object(J.a)(o,2),j=d[0],b=d[1];return Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je("productos?desde=".concat(t,"&limite=").concat(a,"&ordenar=").concat(c));case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,i(n.productos),b(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a,c]),j?Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mb-5",children:[Object(Se.jsx)("h4",{className:"mt-5 mb-3",children:Object(Se.jsx)("b",{children:"-rating"===c?"Art\xedculos mejor valorados":"Art\xedculos m\xe1s vendidos"})}),Object(Se.jsx)(te.a,{xs:2,sm:2,md:3,lg:4,xl:4,className:"g-0",children:s.map((function(e){return Object(Se.jsx)(Xe,Object(l.a)({},e),e._id)}))})]}):Object(Se.jsx)("div",{style:{height:"5000px"}})},tt=a(345),at=["label","type"],ct=["id","setModalShow","oldTitulo","oldComentario","oldRating"],rt=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,at),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-4",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},nt=function(e){var t=e.id,a=e.setModalShow,c=e.oldTitulo,r=e.oldComentario,s=e.oldRating,i=Object(K.a)(e,ct),o=Object(n.c)((function(e){return e.auth})).uid,d=Object(G.useState)(20),j=Object(J.a)(d,2),b=j[0],u=j[1],m=function(){var e=Object(le.a)(oe.a.mark((function e(c){var r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be("productos/".concat(t),{titulo:c.titulo,comentario:c.comentario,rating:b,usuario:o,fecha:new Date},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(n=e.sent).msg?ne.a.fire("Error",n.msg,"error"):(a(""),ne.a.fire("Valoraci\xf3n enviada","Gracias por compartir su experiencia","success"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Se.jsx)(Y.b,{initialValues:{titulo:c||"",comentario:r||""},validationSchema:se.b({titulo:se.c().max(30,"30 caracteres como m\xe1ximo").required("Requerido"),comentario:se.c().max(2e3,"2000 caracteres como m\xe1ximo").required("Requerido")}),onSubmit:m,children:Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},i),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:"Escribir una opini\xf3n"})}),Object(Se.jsxs)(tt.a.Body,{children:[Object(Se.jsx)("h5",{children:"Valoraci\xf3n general"}),Object(Se.jsx)(Ze.Rating,{onClick:function(e){u(e)},ratingValue:s||b,allowHover:!1}),Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(rt,{label:"A\xf1ade un t\xedtulo",name:"titulo",placeholder:"\xbfQu\xe9 es lo m\xe1s importante?"}),Object(Se.jsx)(rt,{label:"A\xf1adir una rese\xf1a escrita",name:"comentario",type:"textarea",rows:"3",placeholder:"\xbfQu\xe9 te ha gustado y qu\xe9 no? \xbfPara qu\xe9 usaste este producto?"}),Object(Se.jsx)(ce.a,{className:"mt-4",type:"submit",variant:"primary",size:"lg",children:"Enviar"})]})]}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:i.onHide,children:"Cerrar"})})]}))})},st=a(135),it=a.n(st),ot=a(183),lt=a.n(ot);it.a.vfs=lt.a.pdfMake.vfs;var dt=function(e,t){var a=t.fecha,c=[];c.push(["Descripci\xf3n","Cantidad","Precio Unitario","Precio Total"]),t.producto.map((function(e){return c.push([e.producto.nombre,e.unidades,e.producto.precio,(e.producto.precio*e.unidades).toFixed(2)])}));var r={content:[{text:"\n\n"},{columns:[{text:"\n                            ".concat(e,"\n                            ").concat(t.direccionFacturacion.line1," ").concat(t.direccionFacturacion.line2,"\n                            ").concat(t.direccionFacturacion.city," ").concat(t.direccionFacturacion.state," ").concat(t.direccionFacturacion.postal_code,"\n                            ").concat(t.direccionFacturacion.country,"\n                        "),style:{fontSize:12}},{},{table:{widths:[100],heights:[50],body:[[{text:"Pagado",fillColor:"#DAF9F9",style:"pagado"}]]}}],style:{lineHeight:1.3}},{text:"\n\n\n"},{text:"Si tienes preguntas sobre tus pedidos, visita https://github.com/carlosbarondev",style:"small"},{canvas:[{type:"line",x1:0,y1:5,x2:515,y2:5,lineWidth:1}]},{text:"\n"},{columns:[{text:[{text:"Direcci\xf3n de facturaci\xf3n",style:"subheader"},{text:"\n                                    ".concat(e,"\n                                    ").concat(t.direccionFacturacion.line1," ").concat(t.direccionFacturacion.line2,"\n                                    ").concat(t.direccionFacturacion.city," ").concat(t.direccionFacturacion.state," ").concat(t.direccionFacturacion.postal_code,"\n                                    ").concat(t.direccionFacturacion.country,"\n                                ")}]},{text:[{text:"Direcci\xf3n de env\xedo",style:"subheader"},{text:"\n                                    ".concat(t.direccionEnvio.name,"\n                                    ").concat(t.direccionEnvio.address.line1," ").concat(t.direccionEnvio.address.line2,"\n                                    ").concat(t.direccionEnvio.address.city," ").concat(t.direccionEnvio.address.state," ").concat(t.direccionEnvio.address.postal_code,"\n                                    ").concat(t.direccionEnvio.address.country,"\n                                ")}]},{text:[{text:"Vendido por",style:"subheader"},{text:"\n                                    ".concat(e,"\n                                    ").concat(t.direccionFacturacion.line1," ").concat(t.direccionFacturacion.line2,"\n                                    ").concat(t.direccionFacturacion.city," ").concat(t.direccionFacturacion.state," ").concat(t.direccionFacturacion.postal_code,"\n                                    ").concat(t.direccionFacturacion.country,"\n                                ")}]}],style:{lineHeight:1.3}},{canvas:[{type:"line",x1:0,y1:5,x2:515,y2:5,lineWidth:1}]},{text:"\n"},{columns:[{text:[{text:"Informaci\xf3n del pedido",style:"subheader"},{text:"\n                                    Fecha del pedido: ".concat(new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),"\n                                    N\xfamero del pedido: ").concat(t.idPedido,"\n                                ")}]}],style:{lineHeight:1.3}},{canvas:[{type:"line",x1:0,y1:5,x2:515,y2:5,lineWidth:1}]},{text:"\n"},{text:"Detalles del documento\n",style:"header"},{canvas:[{type:"line",x1:0,y1:5,x2:515,y2:5,lineWidth:1}]},{text:"\n"},{style:"tableExample",table:{widths:[321,"*","*","*"],body:c}},{text:"Total: ".concat(t.total/100," \u20ac"),style:"total"}],styles:{header:{fontSize:12,bold:!0},subheader:{fontSize:11,bold:!0},total:{fontSize:14,bold:!0,alignment:"right"},pagado:{fontSize:16,bold:!0,alignment:"center",margin:[0,15,0,0]},quote:{italics:!0},small:{fontSize:8},tableExample:{margin:[0,5,0,15]},tableHeader:{bold:!0,fontSize:13,color:"black"}},defaultStyle:{fontSize:8,columnGap:75}};it.a.createPdf(r).open()},jt=function(){var e=Object(s.d)(),t=Object(J.a)(e,1)[0],a=Object(n.b)(),c=Object(W.h)(),r=Object(n.c)((function(e){return e.auth})),i=r.uid,o=r.nombre,l=Object(n.c)((function(e){return e.cart})).carrito,d=Object(G.useState)(!1),j=Object(J.a)(d,2),b=j[0],u=j[1],m=Object(G.useState)(!1),x=Object(J.a)(m,2),h=x[0],O=x[1],p=Object(G.useState)(),f=Object(J.a)(p,2),g=f[0],v=f[1];return Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var c,r,n,s,o,d,j;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.length>0)){e.next=31;break}return e.next=3,be("pagos/".concat(t.get("payment_intent")));case 3:return c=e.sent,e.next=6,c.json();case 6:if(!(r=e.sent).msg){e.next=11;break}ne.a.fire("Error",r.msg,"error"),e.next=29;break;case 11:return e.next=13,be("pagos/usuario/".concat(i));case 13:return n=e.sent,e.next=16,n.json();case 16:if(!(s=e.sent).msg){e.next=21;break}ne.a.fire("Error",s.msg,"error"),e.next=29;break;case 21:return o=l.map((function(e){return{unidades:e.unidades,producto:e.producto._id}})),e.next=24,be("pedidos",{idPedido:t.get("payment_intent"),usuario:i,producto:o,fecha:new Date(1e3*r.paymentIntent.created),direccionEnvio:s.customer.shipping,direccionFacturacion:s.customer.address,metodoPago:r.paymentIntent.charges.data[0].payment_method_details.card.brand,digitos:r.paymentIntent.charges.data[0].payment_method_details.card.last4,total:r.paymentIntent.amount},"POST");case 24:return d=e.sent,e.next=27,d.json();case 27:(j=e.sent).msg?ne.a.fire("Error",j.msg,"error"):(v(j),localStorage.removeItem("carrito"),a(Ne()),localStorage.setItem("pedido",JSON.stringify(j)),O(!0));case 29:e.next=33;break;case 31:v(JSON.parse(localStorage.getItem("pedido"))),O(!0);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,a,t,i]),h&&Object(Se.jsxs)(Ae.a,{className:"animate__animated animate__fadeIn mb-5",children:[Object(Se.jsxs)(Qe.a,{className:"mt-4",children:[Object(Se.jsxs)(Qe.a.Header,{as:"h4",children:["Detalles del pedido",Object(Se.jsx)("div",{className:"vr ms-3 me-3"}),Object(Se.jsx)("button",{className:"botonLink",onClick:function(){return dt(o,g)},children:"Imprimir Factura"})]}),Object(Se.jsx)(Qe.a.Body,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsxs)(ae.a,{xs:12,sm:5,children:[Object(Se.jsx)(Qe.a.Title,{children:"Direcci\xf3n de env\xedo"}),Object(Se.jsxs)(Qe.a.Text,{children:[g.direccionEnvio.name,Object(Se.jsx)("br",{}),g.direccionEnvio.address.line1," ",g.direccionEnvio.address.line2,Object(Se.jsx)("br",{}),g.direccionEnvio.address.postal_code,Object(Se.jsx)("br",{}),g.direccionEnvio.address.city," ",g.direccionEnvio.address.state,Object(Se.jsx)("br",{}),g.direccionEnvio.address.country]})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:5,className:"mt-4 mt-sm-0",children:[Object(Se.jsx)(Qe.a.Title,{children:"M\xe9todo de pago"}),Object(Se.jsxs)(Qe.a.Text,{children:[Object(Se.jsx)(ee.a,{className:"mg-fluid",style:{height:"25px"},src:"https://images-na.ssl-images-amazon.com/images/G/30/checkout/payselect/card-logos-small/visa._CB658923706_.gif"}),Object(Se.jsxs)("span",{children:[" **** ",g.digitos]})]})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:2,className:"mt-4 mt-sm-0",children:[Object(Se.jsx)(Qe.a.Title,{children:"Importe total:"}),Object(Se.jsx)(Qe.a.Text,{children:Object(Se.jsxs)("b",{children:["EUR ",g.total/100]})})]})]})})]}),g.producto.map((function(e){return Object(Se.jsx)(Qe.a,{className:"justify-content-center",children:Object(Se.jsxs)(Qe.a.Body,{children:[Object(Se.jsxs)(te.a,{className:"align-items-center",children:[Object(Se.jsx)(ae.a,{xs:3,sm:3,md:2,className:"d-flex justify-content-center align-items-center",style:{height:"8rem"},children:Object(Se.jsx)(ee.a,{style:{maxHeight:"70%"},src:e.producto.img?e.producto.img:"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(ae.a,{xs:9,sm:9,md:4,children:[Object(Se.jsx)(s.b,{className:"linkProducto",style:{fontSize:"18px"},to:"/".concat(Object(Ve.a)(e.producto.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.nombre.replace(/\s+/g,"-"))),children:e.producto.nombre}),Object(Se.jsxs)("div",{style:{fontWeight:"normal",fontSize:"14px"},children:["Cantidad: ",e.unidades]}),Object(Se.jsxs)("b",{children:[(e.producto.precio*e.unidades).toFixed(2)," \u20ac"]})]}),Object(Se.jsx)(ae.a,{xs:12,sm:12,md:6,className:"text-center mt-3",children:Object(Se.jsx)(ce.a,{variant:"outline-secondary",onClick:function(){return u(e.producto._id)},children:"Escribir una opini\xf3n sobre el producto"})})]}),Object(Se.jsx)(nt,{id:e.producto._id,setModalShow:u,show:b===e.producto._id,onHide:function(){return u("")}})]})},e.producto._id)})),Object(Se.jsx)(ce.a,{variant:"warning",size:"lg",onClick:function(){return c("/")},className:"float-end mt-5 mb-5",children:"Seguir comprando"})]})},bt=a(353),ut=a(343),mt=function(){var e=Object(n.b)(),t=Object(W.h)(),a=Object(n.c)((function(e){return e.auth})).rol,c=Object(n.c)((function(e){return e.cart})).carrito,r=Object(G.useState)(0),i=Object(J.a)(r,2),o=i[0],l=i[1];Object(G.useEffect)((function(){var e=0;c.map((function(t){return e+=t.unidades})),l(e)}),[c]);var d=function(t){e(function(e){return{type:k,payload:e}}(t))};return Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(Se.jsxs)("div",{className:"mt-5 mb-2",style:{fontSize:"22px"},children:[Object(Se.jsx)("b",{children:"(".concat(o,")")})," ",1!==o?"Art\xedculos":"Art\xedculo"," en ",Object(Se.jsx)("b",{children:"tu cesta"})]}),Object(Se.jsxs)(te.a,{children:[Object(Se.jsxs)(ae.a,{md:12,lg:8,children:[Object(Se.jsxs)(Qe.a,{children:[Object(Se.jsx)(Qe.a.Header,{as:"h5",className:"disable-card-header",children:Object(Se.jsxs)(te.a,{className:"align-items-center text-center",children:[Object(Se.jsx)(ae.a,{md:2,children:Object(Se.jsx)(Qe.a.Text,{children:"Art\xedculo"})}),Object(Se.jsx)(ae.a,{md:5}),Object(Se.jsx)(ae.a,{md:3,children:Object(Se.jsx)(Qe.a.Text,{children:"Unidades"})}),Object(Se.jsx)(ae.a,{md:2,children:Object(Se.jsx)(Qe.a.Text,{children:"Total"})})]})}),Object(Se.jsx)(Qe.a.Header,{as:"h5",className:"enable-card-header",children:Object(Se.jsx)(te.a,{className:"align-items-center",children:Object(Se.jsx)(Qe.a.Text,{children:"Art\xedculo"})})})]}),Object(Se.jsx)(bt.a,{className:"todo-list",children:c.map((function(t){return Object(Se.jsx)(ut.a,{timeout:500,classNames:"item",children:Object(Se.jsx)(Qe.a,{children:Object(Se.jsx)(Qe.a.Body,{children:Object(Se.jsxs)(te.a,{className:"align-items-center",children:[Object(Se.jsx)(ae.a,{xs:3,sm:3,md:2,className:"d-flex justify-content-center align-items-center",style:{height:"6rem"},children:Object(Se.jsx)(ee.a,{style:{maxHeight:"70%"},src:t.producto.img?t.producto.img:"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(ae.a,{xs:9,sm:9,md:5,children:[Object(Se.jsx)(s.b,{className:"linkProducto",style:{fontSize:"20px"},to:"/".concat(Object(Ve.a)(t.producto.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(t.producto.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(t.producto.nombre.replace(/\s+/g,"-"))),children:t.producto.nombre}),Object(Se.jsxs)("div",{children:[t.producto.precio," \u20ac"]}),Object(Se.jsx)("button",{className:"botonLinkProducto mt-2",onClick:function(){return d(t.producto._id)},children:"Eliminar"})]}),Object(Se.jsx)(ae.a,{xs:7,sm:7,md:3,children:Object(Se.jsxs)("div",{className:"input-group mt-2",children:[Object(Se.jsx)("button",{onClick:function(){return a=t.producto,void((c=t.unidades)>=2&&e(ge(a,c-1,!0)));var a,c},className:"border",style:{height:"30px",width:"30px",marginLeft:"auto"},children:"-"}),Object(Se.jsx)("input",{className:"text-center border",type:"text",value:t.unidades,onChange:function(a){return function(t,a){e(ge(a,t>0?t:1,!0))}(parseInt(a.target.value),t.producto)},style:{height:"30px",width:"30px"}}),Object(Se.jsx)("button",{onClick:function(){return a=t.producto,c=t.unidades,void e(ge(a,c+1,!0));var a,c},className:"border",style:{height:"30px",width:"30px",marginRight:"auto"},children:"+"})]})}),Object(Se.jsx)(ae.a,{xs:5,sm:5,md:2,className:"text-center",children:Object(Se.jsxs)(Qe.a.Text,{className:"mt-2",children:[Object(Se.jsx)("span",{className:"enable-span",children:"Total:\xa0"}),(t.producto.precio*t.unidades).toFixed(2)," \u20ac"]})})]})})})},t.producto._id)}))}),Object(Se.jsxs)("div",{className:"mt-3 mb-5",children:[Object(Se.jsxs)(ce.a,{variant:"outline-secondary",onClick:function(){e(Ne()),ne.a.fire("Cesta vaciada","No hay art\xedculos en tu carrito","success")},children:[Object(Se.jsx)("i",{className:"fa-solid fa-trash"})," Vaciar cesta"]}),Object(Se.jsx)(ce.a,{variant:"outline-secondary",onClick:function(){return t("/")},className:"float-end",children:"Seguir comprando"})]})]}),Object(Se.jsx)(ae.a,{md:12,lg:4,children:Object(Se.jsxs)(Qe.a,{className:"mb-5",children:[Object(Se.jsx)(Qe.a.Header,{as:"h5",className:"text-center",children:"TOTAL"}),Object(Se.jsxs)(Qe.a.Body,{className:"text-center",children:[Object(Se.jsxs)(Qe.a.Title,{children:[c.reduce((function(e,t){return e+t.unidades*t.producto.precio}),0).toFixed(2)," \u20ac"]}),Object(Se.jsx)("div",{className:"mt-4 d-grid gap-2",children:Object(Se.jsx)(ce.a,{className:"mt-1",variant:"warning",size:"lg",onClick:function(){"ADMIN_ROLE"!==a?(e(ue(2)),localStorage.setItem("step",2),t("/shipping")):ne.a.fire("Login","Debe cerrar la sesi\xf3n de Administrador y acceder como cliente","info")},children:"Realizar Pedido"})})]})]})})]})]})},xt=function(e){var t=e.isAuthenticated,a=e.children,c=Object(W.g)(),r=c.pathname,n=c.search;return localStorage.setItem("lastPath",r+n),t?a:Object(Se.jsx)(W.a,{to:"/login",replace:!0})},ht=function(e){var t=Object(W.h)(),a=e.nombre,c=e.img,r=e.CategoriaNombre;return Object(Se.jsx)(Qe.a,{className:"cardCategory",onClick:function(){return t("/".concat(Object(Ve.a)(r.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(a.replace(/\s+/g,"-"))),{state:{nombreCat:r,nombreSub:a}})},children:Object(Se.jsxs)("div",{className:"d-flex flex-column",children:[Object(Se.jsx)("div",{className:"border-section-category",children:Object(Se.jsx)(ee.a,{className:"imagenCentrar",src:c||"/assets/no-image.png",fluid:!0})}),Object(Se.jsx)(Qe.a.Body,{className:"d-flex justify-content-center",children:Object(Se.jsx)(Qe.a.Title,{className:"cardCategoryBody",children:a.charAt(0).toUpperCase()+a.slice(1)})})]})})},Ot=function(e){var t=e.categoria,a=Object(G.useState)(),c=Object(J.a)(a,2),r=c[0],n=c[1],s=Object(G.useState)(!1),i=Object(J.a)(s,2),o=i[0],d=i[1];return Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var a,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je("productos/mejor/?desde=0&limite=8&categoria=".concat(t,"&ordenar=","-vendido"));case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,n(c.productos),d(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),o?Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mb-5",children:[Object(Se.jsxs)("h4",{className:"mt-5 mb-4",children:["Art\xedculos m\xe1s vendidos en ",Object(Se.jsx)("b",{children:t.replace(/-/g," ")})]}),Object(Se.jsx)(te.a,{xs:2,sm:2,md:3,lg:4,xl:4,className:"g-0",children:r.map((function(e){return Object(Se.jsx)(Xe,Object(l.a)({},e),e._id)}))})]}):Object(Se.jsx)("div",{style:{height:"5000px"}})},pt=function(){var e=Object(W.h)(),t=Object(W.i)().CategoriaNombre,a=Object(G.useState)(),c=Object(J.a)(a,2),r=c[0],n=c[1],s=Object(G.useState)(),i=Object(J.a)(s,2),o=i[0],d=i[1],j=Object(G.useState)(!1),b=Object(J.a)(j,2),u=b[0],m=b[1];return Object(G.useEffect)((function(){function a(){return(a=Object(le.a)(oe.a.mark((function a(){var c,r,s;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,je("categorias/".concat(t.replace(/-/g," "),"?visibles=true"));case 3:return c=a.sent,a.next=6,c.json();case 6:r=a.sent,s=r.categoria,d(s.nombre),n(s.subcategorias),m(!0),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0),e("/");case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,e]),u&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(Se.jsxs)("h4",{className:"mt-4 mb-3",children:["Categor\xedas en ",Object(Se.jsx)("b",{children:o})]}),Object(Se.jsx)(te.a,{xs:2,sm:3,md:4,lg:5,xl:5,className:"g-0",children:r.map((function(e){return Object(Se.jsx)(ht,Object(l.a)({CategoriaNombre:t},e),e._id)}))}),Object(Se.jsx)(Ot,{categoria:o})]})},ft=function(e){var t=Object(W.h)(),a=e.nombre,c=e.img;return Object(Se.jsx)(Qe.a,{className:"cardCategory",onClick:function(){return t("/".concat(Object(Ve.a)(a.replace(/\s+/g,"-"))),{state:a})},children:Object(Se.jsxs)("div",{className:"d-flex flex-column",children:[Object(Se.jsx)("div",{className:"border-section-category",children:Object(Se.jsx)(ee.a,{className:"imagenCentrar",src:c||"/assets/no-image.png",fluid:!0})}),Object(Se.jsx)(Qe.a.Body,{className:"d-flex justify-content-center",children:Object(Se.jsx)(Qe.a.Title,{className:"cardCategoryBody",children:a.charAt(0).toUpperCase()+a.slice(1)})})]})})},gt=function(){var e=Object(n.b)(),t=Object(G.useState)(),a=Object(J.a)(t,2),c=a[0],r=a[1],s=Object(G.useState)(!1),i=Object(J.a)(s,2),o=i[0],d=i[1];Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je("categorias?desde=0&limite=5");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(a.categorias),d(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return o&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(Se.jsxs)("h4",{className:"mt-3 mb-3",children:[Object(Se.jsx)("b",{children:"Categor\xedas destacadas"}),Object(Se.jsx)("button",{className:"botonLinkProducto ms-2",style:{fontSize:"16px"},onClick:function(){return e(he())},children:"Ver m\xe1s"})]}),Object(Se.jsx)(te.a,{xs:2,sm:3,md:4,lg:5,xl:5,className:"g-0",children:c.map((function(e){return Object(Se.jsx)(ft,Object(l.a)({},e),e._id)}))})]})},vt=function(){var e=Object(W.h)(),t=Object(W.i)().SubCategoriaNombre,a=Object(G.useState)(),c=Object(J.a)(a,2),r=c[0],n=c[1],s=Object(G.useState)(),i=Object(J.a)(s,2),o=i[0],d=i[1],j=Object(G.useState)(!1),b=Object(J.a)(j,2),u=b[0],m=b[1];return Object(G.useEffect)((function(){function a(){return(a=Object(le.a)(oe.a.mark((function a(){var c,r;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,je("categorias/subcategoria/".concat(t.replace(/-/g," ")));case 3:return c=a.sent,a.next=6,c.json();case 6:r=a.sent,d(r.subcategoria.nombre),n(r.subcategoria.productos),m(!0),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0),e("/");case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,e]),u&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(Se.jsx)("h4",{className:"mt-4 mb-3",children:Object(Se.jsx)("b",{children:o})}),Object(Se.jsx)(te.a,{xs:2,sm:2,md:3,lg:4,xl:4,className:"g-0",children:r.map((function(e){return Object(Se.jsx)(Xe,Object(l.a)({nombreCat:e.categoria,nombreSub:e.subcategoria},e),e._id)}))})]})},Nt=a(348),yt=function(){return Object(Se.jsxs)(Nt.a,{variant:"dark",className:"animate__animated animate__fadeIn navbarDisable mb-5",children:[Object(Se.jsx)(Nt.a.Item,{children:Object(Se.jsx)(s.b,{to:"/".concat(Object(Ve.a)("Electronica".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Tablets".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Samsung Galaxy Tab S8 Ultra 128GB".replace(/\s+/g,"-"))),children:Object(Se.jsx)("img",{className:"d-block w-100",src:"/assets/tab.jpeg",alt:"First slide"})})}),Object(Se.jsx)(Nt.a.Item,{children:Object(Se.jsx)(s.b,{to:"/".concat(Object(Ve.a)("Electronica".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Auriculares".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Apple AirPods (3.\xaa generaci\xf3n)".replace(/\s+/g,"-"))),children:Object(Se.jsx)("img",{className:"d-block w-100",src:"/assets/airpods.jpg",alt:"Second slide"})})}),Object(Se.jsx)(Nt.a.Item,{children:Object(Se.jsx)(s.b,{to:"/".concat(Object(Ve.a)("Informatica".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Portatiles".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Apple MacBook Pro 2021 512GB".replace(/\s+/g,"-"))),children:Object(Se.jsx)("img",{className:"d-block w-100",src:"/assets/macbook.jpg",alt:"Third slide"})})})]})},kt=function(){var e,t,a=Object(W.g)(),c=null===(e=a.state)||void 0===e?void 0:e.nombre,r=null===(t=a.state)||void 0===t?void 0:t.busqueda;return Object(Se.jsx)(Se.Fragment,{children:r?Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(Se.jsx)("h4",{className:"mt-5 mb-4",children:Object(Se.jsx)("b",{children:'Resultados de b\xfasqueda para "'.concat(c,'" (').concat(r.length,")")})}),Object(Se.jsx)(te.a,{xs:2,sm:2,md:3,lg:4,xl:4,className:"g-0",children:r.map((function(e){return Object(Se.jsx)(Xe,Object(l.a)({},e),e._id)}))})]}):Object(Se.jsx)(W.a,{to:"/",replace:!0})})},Ct=function(){var e=Object(W.h)();return Object(Se.jsxs)("footer",{className:"row row-cols-4 py-5 mt-auto border-top d-flex justify-content-around align-items-center animate__animated animate__fadeIn",style:{backgroundColor:"#f8f9fa",overflow:"hidden",padding:"0",margin:"0"},children:[Object(Se.jsx)("div",{className:"col-12 col-lg-4 mb-5 mb-lg-0",children:Object(Se.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:Object(Se.jsx)(ee.a,{src:"/assets/logo_grande.png",alt:"logo",style:{cursor:"pointer",maxWidth:"40%"},onClick:function(){return e("/")},fluid:!0})})}),Object(Se.jsxs)("div",{className:"col-4 col-lg-2 d-flex flex-column justify-content-center align-items-center",children:[Object(Se.jsx)("h5",{children:"Documentaci\xf3n"}),Object(Se.jsxs)("ul",{className:"nav flex-column",children:[Object(Se.jsx)("li",{className:"nav-item mb-2",children:Object(Se.jsx)("a",{href:"https://github.com/carlosbarondev/ecommerce-backend",className:"nav-link p-0 linkFooter text-muted",children:"Backend"})}),Object(Se.jsx)("li",{className:"nav-item mb-2",children:Object(Se.jsx)("a",{href:"https://github.com/carlosbarondev/ecommerce-frontend",className:"nav-link p-0 linkFooter text-muted",children:"Frontend"})})]})]}),Object(Se.jsxs)("div",{className:"col-4 col-lg-2 d-flex flex-column justify-content-center align-items-center",children:[Object(Se.jsx)("h5",{children:"Contacto"}),Object(Se.jsxs)("ul",{className:"nav flex-column",children:[Object(Se.jsx)("li",{className:"nav-item mb-2",children:Object(Se.jsx)("a",{href:"mailto:carlosbarondev@gmail.com",className:"nav-link p-0 linkFooter text-muted",children:"Correo"})}),Object(Se.jsx)("li",{className:"nav-item mb-2",children:Object(Se.jsx)("a",{href:"https://github.com/carlosbarondev",className:"nav-link p-0 linkFooter text-muted",children:"GitHub"})})]})]}),Object(Se.jsx)("div",{className:"col-12 col-lg-4 mt-5 mt-sm-0",children:Object(Se.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:Object(Se.jsx)("a",{className:"linkFooter text-muted",href:"https://github.com/carlosbarondev",children:"carlosbarondev \xa9 2022"})})})]})},wt=function(){var e=Object(W.h)();return Object(Se.jsx)("div",{className:"navbarDisable",children:Object(Se.jsxs)(te.a,{className:"animate__animated animate__fadeIn",children:[Object(Se.jsx)(ae.a,{xs:4,children:Object(Se.jsx)(ee.a,{src:"/assets/small_xiaomi.webp",fluid:!0,style:{cursor:"pointer"},alt:"xiaomi",onClick:function(){return e("/".concat(Object(Ve.a)("Smartphones".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Xiaomi".replace(/\s+/g,"-"))),{state:{nombreCat:"Electr\xf3nica",nombreSub:"Smartphones"}})}})}),Object(Se.jsx)(ae.a,{xs:4,children:Object(Se.jsx)(ee.a,{src:"/assets/small_reloj.webp",fluid:!0,style:{cursor:"pointer"},alt:"smartwatch",onClick:function(){return e("/".concat(Object(Ve.a)("Electr\xf3nica".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Relojes Inteligentes".replace(/\s+/g,"-"))),{state:{nombreCat:"Electr\xf3nica",nombreSub:"Relojes Inteligentes"}})}})}),Object(Se.jsx)(ae.a,{xs:4,children:Object(Se.jsx)(ee.a,{src:"/assets/small_auriculares.webp",fluid:!0,style:{cursor:"pointer"},alt:"auriculares",onClick:function(){return e("/".concat(Object(Ve.a)("Electr\xf3nica".replace(/\s+/g,"-")),"/").concat(Object(Ve.a)("Auriculares".replace(/\s+/g,"-"))),{state:{nombreCat:"Electr\xf3nica",nombreSub:"Auriculares"}})}})})]})})},_t=function(){var e=Object(n.c)((function(e){return e.auth})).uid,t=Object(n.c)((function(e){return e.cart})).carrito,a=Object(W.g)(),c=a.pathname,r=a.search;return localStorage.setItem("lastPath",c+r),Object(Se.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[Object(Se.jsx)(Ye,{}),Object(Se.jsx)(Ae.a,{children:Object(Se.jsxs)(W.d,{children:[Object(Se.jsx)(W.b,{path:"/:CategoriaNombre",element:Object(Se.jsx)(pt,{})}),Object(Se.jsx)(W.b,{path:"/:CategoriaNombre/:SubCategoriaNombre",element:Object(Se.jsx)(vt,{})}),Object(Se.jsx)(W.b,{path:"/:CategoriaNombre/:SubCategoriaNombre/:ProductoNombre",element:Object(Se.jsx)($e,{})}),Object(Se.jsx)(W.b,{path:"/buscar/:Busqueda",element:Object(Se.jsx)(kt,{})}),Object(Se.jsx)(W.b,{path:"cart",element:Object(Se.jsx)(Se.Fragment,{children:t.length>0?Object(Se.jsx)(mt,{}):Object(Se.jsx)(W.a,{to:"/",replace:!0})})}),Object(Se.jsx)(W.b,{path:"/cart/*",element:Object(Se.jsx)(W.a,{to:"/"})}),Object(Se.jsx)(W.b,{path:"summary",element:Object(Se.jsx)(xt,{isAuthenticated:!!e,children:Object(Se.jsx)(jt,{})})}),Object(Se.jsx)(W.b,{path:"/",element:Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsx)(yt,{}),Object(Se.jsx)(gt,{}),Object(Se.jsx)(et,{desde:0,limite:4,ordenar:"-rating"}),Object(Se.jsx)(wt,{}),Object(Se.jsx)(et,{desde:0,limite:8,ordenar:"-vendido"})]})}),Object(Se.jsx)(W.b,{path:"/*",element:Object(Se.jsx)(W.a,{to:"/"})})]})}),Object(Se.jsx)(Ct,{})]})},St=function(){var e=Object(W.h)();return Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4",children:[Object(Se.jsx)("h5",{children:"Mi cuenta"}),Object(Se.jsxs)("div",{className:"list-group",children:[Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/datos")},children:"Mis datos"}),Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/pedidos")},children:"Pedidos"}),Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/valoraciones")},children:"Valoraciones"}),Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/deseos")},children:"Lista de deseos"})]})]})},Et=function(){var e=Object(le.a)(oe.a.mark((function e(t,a,c){var r,n,s,i;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=18;break}return e.prev=1,r=t.target.files,(n=new FormData).append("archivo",r[0]),e.next=7,be("uploads/".concat(c,"/").concat(a),n,"PUT",!0);case 7:return s=e.sent,e.next=10,s.json();case 10:return i=e.sent,e.abrupt("return",i);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",ne.a.fire("Error","","error"));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a,c){return e.apply(this,arguments)}}(),It=["label","type"],Tt=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,It),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},Pt=function(){var e=Object(n.b)(),t=Object(n.c)((function(e){return e.auth})),a=t.nombre,c=t.uid,r=t.img,s=Object(G.useState)(),i=Object(J.a)(s,2),o=i[0],l=i[1],d=function(){var t=Object(le.a)(oe.a.mark((function t(a,r){var n,s;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be("usuarios/".concat(c),{nombre:a,password:r},"PUT");case 3:return n=t.sent,t.next=6,n.json();case 6:if(!(s=t.sent).msg){t.next=11;break}return t.abrupt("return",ne.a.fire("Error",s.msg,"error"));case 11:return e(we(a)),localStorage.setItem("token",s.token),localStorage.setItem("token-init-date",(new Date).getTime()),t.abrupt("return",ne.a.fire("Datos actualizados","","success"));case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",ne.a.fire("Error",t.t0.message,"error"));case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,a){return t.apply(this,arguments)}}(),j=function(){var e=Object(le.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.password===t.password2){e.next=4;break}return e.abrupt("return",ne.a.fire("Error","Las contrase\xf1as no coinciden","error"));case 4:e.prev=4,o?b(t.nombre,t.password):d(t.nombre,t.password),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 12:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var t=Object(le.a)(oe.a.mark((function t(a,r){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o&&Et(o,c,"usuarios").then((function(t){t.msg?ne.a.fire("Error",t.msg,"error"):(e(_e(t.img)),l(),d(a,r))})).catch((function(e){return ne.a.fire("Error",e.message,"error")}));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),u=function(){var t=Object(le.a)(oe.a.mark((function t(){var a,n;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=24;break}return t.prev=1,t.next=4,be("usuarios/".concat(c),{img:""},"PUT");case 4:return a=t.sent,t.next=7,a.json();case 7:if(!(n=t.sent).msg){t.next=12;break}return t.abrupt("return",ne.a.fire("Error",n.msg,"error"));case 12:return e(_e("")),localStorage.setItem("token",n.token),localStorage.setItem("token-init-date",(new Date).getTime()),t.abrupt("return",ne.a.fire("Imagen eliminada","","success"));case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",ne.a.fire("Error",t.t0.message,"error"));case 22:t.next=25;break;case 24:return t.abrupt("return",ne.a.fire("Error","No ha subido ninguna imagen","error"));case 25:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(){return t.apply(this,arguments)}}();return Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)("h3",{children:"Mis Datos"}),Object(Se.jsx)(Y.b,{initialValues:{nombre:a||"",password:"",password2:""},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(20,"20 caracteres como m\xe1ximo"),password:se.c().min(6,"6 caracteres como m\xednimo").max(15,"15 caracteres como m\xe1ximo"),password2:se.c().min(6,"6 caracteres como m\xednimo").max(15,"15 caracteres como m\xe1ximo")}),onSubmit:j,children:Object(Se.jsxs)(Y.a,{className:"mt-3",children:[Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:12,md:6,className:"mt-auto",children:Object(Se.jsx)(Tt,{label:"Nombre",name:"nombre"})}),Object(Se.jsx)(ae.a,{xs:12,md:6,className:"d-flex justify-content-center align-items-center mt-4 mt-md-0",children:r?Object(Se.jsx)(Be.a,{image:r||"/assets/no-image.png",roundedColor:"#49c1e1",imageWidth:"150",imageHeight:"150",roundedSize:"4",borderRadius:"15"}):Object(Se.jsx)("div",{className:"mt-5",children:Object(Se.jsx)("i",{className:"fa-solid fa-circle-user fa-2xl",style:{fontSize:"70px"}})})})]}),Object(Se.jsxs)(te.a,{className:"mt-4",children:[Object(Se.jsx)(ae.a,{className:"mt-auto",children:Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return l(e)}})]})}),Object(Se.jsx)(ae.a,{className:"mt-auto",children:Object(Se.jsx)("div",{className:"d-grid",children:Object(Se.jsx)(ce.a,{onClick:function(){return u()},disabled:""===r||!r,children:"Eliminar imagen"})})})]}),Object(Se.jsxs)(te.a,{className:"mt-3",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Tt,{label:"Nueva contrase\xf1a",name:"password"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Tt,{label:"Repetir contrase\xf1a",name:"password2"})})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Actualizar"})})]})})]})},Dt=a(346),Ft=function(){var e=Object(n.b)(),t=Object(W.h)(),a=Object(n.c)((function(e){return e.auth})).uid,c=Object(n.c)((function(e){return e.cart})).carrito,r=Object(G.useState)(),i=Object(J.a)(r,2),o=i[0],l=i[1],d=Object(G.useState)(!1),j=Object(J.a)(d,2),b=j[0],u=j[1],m=Object(G.useState)(0),x=Object(J.a)(m,2),h=x[0],O=x[1];Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("usuarios/deseos/".concat(a));case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(c=e.sent).msg){e.next=11;break}return e.abrupt("return",ne.a.fire("Error",c.msg,"error"));case 11:l(c.deseos.deseos),u(!0);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0,"error"));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b,a]);var p=function(){var a=Object(le.a)(oe.a.mark((function a(){var r,n,s;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=!0,0!==(n=document.querySelectorAll('input[type="checkbox"]:checked')).length){a.next=4;break}return a.abrupt("return",ne.a.fire("\xa1Atenci\xf3n!","No ha seleccionado ning\xfan art\xedculo","info"));case 4:s=Array.from(n).map((function(e){return e.id})),o.filter((function(e){return s.find((function(t){return t===e._id}))})).forEach((function(t){if(!t.estado)return r=!1,ne.a.fire("Art\xedculo descatalogado","".concat(t.nombre," ya no est\xe1 disponible"),"warning");if(!(t.stock>0))return r=!1,ne.a.fire("Art\xedculo agotado","".concat(t.nombre," estar\xe1 disponible pr\xf3ximamente"),"warning");var a=c.find((function(e){return e.producto._id===t._id}));e(ge(t,a?a.unidades+1:1,!0))})),r&&t("/cart");case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),f=function(){var e=Object(le.a)(oe.a.mark((function e(){var t,c,r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=document.querySelectorAll('input[type="checkbox"]:checked')).length){e.next=3;break}return e.abrupt("return",ne.a.fire("\xa1Atenci\xf3n!","No ha seleccionado ning\xfan art\xedculo","info"));case 3:return c=Array.from(t).map((function(e){return e.id})),e.prev=4,e.next=7,be("usuarios/deseos/".concat(a),{ids:c},"DELETE");case 7:return r=e.sent,e.next=10,r.json();case 10:if(!(n=e.sent).msg){e.next=15;break}return e.abrupt("return",ne.a.fire("Error",n.msg,"error"));case 15:l(n.usuario.deseos),O(0);case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 23:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}();return b&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mb-5",children:[Object(Se.jsx)("h3",{className:"mt-4 mb-4",children:"Lista de deseos"}),0===o.length?Object(Se.jsxs)("div",{className:"centrar mt-5",children:[Object(Se.jsx)("b",{children:"No ha a\xf1adido ning\xfan producto a la lista"}),Object(Se.jsx)("div",{children:"De momento no tienes ning\xfan producto deseado,"}),Object(Se.jsx)("div",{children:"pero te animamos a ver nuestro cat\xe1logo de"}),Object(Se.jsx)("div",{children:"productos y a\xf1adirlos a tu lista de deseados"}),Object(Se.jsx)(ce.a,{className:"mt-3",variant:"warning",onClick:function(){return t("/")},children:"Ver el cat\xe1logo"})]}):Object(Se.jsxs)(Dt.a,{children:[Object(Se.jsxs)(te.a,{className:"mb-4",children:[Object(Se.jsx)(ae.a,{xs:12,sm:4,md:5,lg:7,xl:8,className:"mb-4 mb-sm-0",children:Object(Se.jsxs)("h5",{className:"mt-auto mb-auto me-auto",children:["Seleccionados: ",h]})}),Object(Se.jsxs)(ae.a,{xs:12,sm:8,md:7,lg:5,xl:4,className:"d-flex justify-content-evenly",children:[Object(Se.jsx)(ce.a,{variant:"outline-dark",onClick:p,children:"A\xf1adir al carrito"}),Object(Se.jsx)(ce.a,{variant:"outline-dark",onClick:f,children:"Eliminar de la lista"})]})]}),Object(Se.jsx)(te.a,{xs:2,sm:2,md:3,lg:4,xl:4,className:"g-0",children:Object(Se.jsx)(bt.a,{className:"todo-list border",component:null,children:o.map((function(e){return Object(Se.jsx)(ut.a,{timeout:500,classNames:"item",children:Object(Se.jsxs)(Qe.a,{className:"cardProduct",style:{transform:"none"},onClick:function(){return function(e){document.getElementById(e).checked?document.getElementById(e).checked=!1:document.getElementById(e).checked=!0;var t=document.querySelectorAll('input[type="checkbox"]:checked');O(t.length)}(e._id)},children:[Object(Se.jsx)(Dt.a.Check,{style:{pointerEvents:"none",position:"absolute",marginTop:"5px",marginLeft:"12px"},type:"checkbox",id:e._id,label:""}),Object(Se.jsxs)("div",{className:"d-flex flex-column",children:[Object(Se.jsx)("div",{className:"border-section",children:Object(Se.jsx)(ee.a,{className:"imagenCentrar",src:e.img,style:{maxHeight:"65%"},fluid:!0})}),Object(Se.jsxs)(Qe.a.Body,{className:"d-flex justify-content-center",children:[Object(Se.jsx)(Qe.a.Text,{className:"cardName",children:Object(Se.jsx)(s.b,{className:"linkProducto",to:"/".concat(Object(Ve.a)(e.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.nombre.replace(/\s+/g,"-"))),children:e.nombre})}),Object(Se.jsx)(Qe.a.Title,{className:"cardPrice",children:Object(Se.jsxs)("b",{children:[e.precio," \u20ac"]})})]})]})]})},e._id)}))})})]})]})},zt=a(349),At=a(352),qt=function(){var e=Object(W.h)(),t=Object(n.c)((function(e){return e.auth})).uid,a=Object(G.useState)(),c=Object(J.a)(a,2),r=c[0],i=c[1],o=Object(G.useState)(),l=Object(J.a)(o,2),d=l[0],j=l[1],b=Object(G.useState)(!1),u=Object(J.a)(b,2),m=u[0],x=u[1],h=Object(G.useState)(!1),O=Object(J.a)(h,2),p=O[0],f=O[1],g=Object(G.useState)(!1),v=Object(J.a)(g,2),N=v[0],y=v[1],k={year:"numeric",month:"long",day:"numeric"};Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var a,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("productos/valoraciones/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(c=e.sent).msg){e.next=11;break}return e.abrupt("return",ne.a.fire("Error",c.msg,"error"));case 11:i(c.valorados),j(c.noValorados),x(!0);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,N,t]);return m&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)("h3",{className:"mb-4",children:"Mis Valoraciones"}),Object(Se.jsxs)(zt.a,{defaultActiveKey:"sinvalorar",id:"uncontrolled-tab",className:"mb-5",children:[Object(Se.jsx)(At.a,{eventKey:"sinvalorar",title:"Sin valorar (".concat(d.length,")"),children:d.length<=0?Object(Se.jsxs)("div",{className:"centrar",children:[Object(Se.jsx)("b",{children:"No hay productos disponibles para valorar"}),Object(Se.jsx)("div",{children:"De momento no tienes ning\xfan producto por"}),Object(Se.jsx)("div",{children:"valorar, pero te animamos a ver nuestro"}),Object(Se.jsx)("div",{children:"cat\xe1logo de productos y valorar despu\xe9s de tu"}),Object(Se.jsx)("div",{children:"compra."}),Object(Se.jsx)(ce.a,{className:"mt-3",variant:"warning",onClick:function(){return e("/")},children:"Ver el cat\xe1logo"})]}):Object(Se.jsx)(bt.a,{className:"todo-list",children:d.map((function(e){return Object(Se.jsx)(ut.a,{timeout:500,classNames:"item",children:Object(Se.jsxs)(te.a,{className:"align-items-center mt-4",children:[Object(Se.jsx)(ae.a,{xs:1,sm:1,md:1}),Object(Se.jsx)(ae.a,{xs:3,sm:3,md:2,className:"d-flex justify-content-center align-items-center",style:{height:"8rem"},children:Object(Se.jsx)(ee.a,{style:{maxHeight:"80%"},src:e.img?e.img:"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(ae.a,{xs:8,sm:8,md:9,className:"d-flex flex-column align-self-center",children:[Object(Se.jsx)(s.b,{className:"linkProducto mb-1",style:{fontSize:"20px"},to:"/".concat(Object(Ve.a)(e.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.nombre.replace(/\s+/g,"-"))),children:e.nombre}),Object(Se.jsxs)("span",{className:"d-flex align-items-center",children:[Object(Se.jsx)(Ze.Rating,{className:"me-2 mb-1",style:{pointerEvents:"none"},size:20,ratingValue:e.rating,allowHover:!1})," ".concat(e.opinion.length," Valoraciones")]}),Object(Se.jsx)("div",{children:Object(Se.jsxs)(ce.a,{className:"mt-3",variant:"outline-secondary",size:"sm",onClick:function(){return y(e._id)},children:[Object(Se.jsx)("span",{className:"disable-card-header",children:"Escribir una opini\xf3n sobre el producto"}),Object(Se.jsx)("span",{className:"enable-card-header",children:"Valorar"})]})})]}),Object(Se.jsx)("hr",{className:"mt-5"}),Object(Se.jsx)(nt,{id:e._id,setModalShow:y,show:N===e._id,onHide:function(){return y("")}})]})},e._id)}))})}),Object(Se.jsx)(At.a,{eventKey:"valorados",title:"Valorados (".concat(r.length,")"),children:r.length<=0?Object(Se.jsxs)("div",{className:"centrar",children:[Object(Se.jsx)("b",{children:"No hay productos valorados"}),Object(Se.jsx)("div",{children:"No has valorado ning\xfan producto, pero"}),Object(Se.jsx)("div",{children:"puedes visitar cualquier producto y dejar tu"}),Object(Se.jsx)("div",{children:"valoraci\xf3n para ayudar al resto de usuarios."}),Object(Se.jsx)(ce.a,{className:"mt-3",variant:"warning",onClick:function(){return e("/")},children:"Ver el cat\xe1logo"})]}):Object(Se.jsx)(bt.a,{className:"todo-list",children:r.map((function(e){var a,c,r;return Object(Se.jsx)(ut.a,{timeout:500,classNames:"item",children:Object(Se.jsxs)(te.a,{className:"align-items-center mt-4",children:[Object(Se.jsx)(ae.a,{xs:1,sm:1,md:1,lg:1,xl:1}),Object(Se.jsx)(ae.a,{xs:3,sm:3,md:3,lg:3,xl:2,className:"d-flex justify-content-center align-items-center",style:{height:"8rem"},children:Object(Se.jsx)(ee.a,{style:{maxHeight:"80%"},src:e.img?e.img:"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(ae.a,{xs:8,sm:8,md:8,lg:8,xl:3,className:"d-flex flex-column",children:[Object(Se.jsx)("div",{children:Object(Se.jsx)(s.b,{className:"linkProducto mb-1",style:{fontSize:"20px"},to:"/".concat(Object(Ve.a)(e.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.nombre.replace(/\s+/g,"-"))),children:e.nombre})}),Object(Se.jsx)("div",{children:Object(Se.jsx)(ce.a,{className:"mt-2",variant:"outline-secondary",size:"sm",onClick:function(){return f(e._id)},children:"Editar opini\xf3n del producto"})}),Object(Se.jsx)("div",{children:Object(Se.jsx)(ce.a,{className:"mt-3",variant:"danger",size:"sm",onClick:function(){return a=e._id,c=e.opinion[0]._id,void ne.a.fire({title:"\xbfEst\xe1s seguro?",text:"\xa1No podr\xe1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then((function(e){if(e.isConfirmed){var r=function(){var e=Object(le.a)(oe.a.mark((function e(){var r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("productos/valoraciones/".concat(t),{idProducto:a,idComentario:c},"DELETE");case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(n=e.sent).msg){e.next=9;break}return e.abrupt("return",ne.a.fire("Error",n.msg,"error"));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0,"error"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();ne.a.fire("Eliminado","El comentario ha sido eliminado","success"),r(),y(!N)}}));var a,c},children:"Eliminar opini\xf3n"})})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:12,md:12,lg:12,xl:6,className:"mt-3",children:[Object(Se.jsxs)("div",{className:"comentarios",children:[Object(Se.jsx)(Ze.Rating,{style:{pointerEvents:"none",marginRight:"8px"},size:20,ratingValue:e.opinion[0].rating,allowHover:!1}),Object(Se.jsx)("div",{style:{fontSize:"18px"},children:"".concat(e.opinion[0].titulo)})]}),Object(Se.jsx)("div",{style:{fontSize:"14px"},children:"".concat(new Date(e.opinion[0].fecha).toLocaleDateString("es-ES",k))}),Object(Se.jsx)("div",{className:"mt-3",children:"".concat(e.opinion[0].comentario)})]}),Object(Se.jsx)("hr",{className:"mt-5"}),Object(Se.jsx)(nt,{id:e._id,setModalShow:f,show:p===e._id,onHide:function(){return f("")},oldTitulo:(null===(a=e.opinion[0])||void 0===a?void 0:a.titulo)||null,oldComentario:(null===(c=e.opinion[0])||void 0===c?void 0:c.comentario)||null,oldRating:(null===(r=e.opinion[0])||void 0===r?void 0:r.rating)||null})]})},e.opinion[0]._id)}))})})]})]})},Ht=function(){var e=Object(W.h)(),t=Object(n.c)((function(e){return e.auth})),a=t.nombre,c=t.uid,r=Object(G.useState)(),i=Object(J.a)(r,2),o=i[0],l=i[1],d=Object(G.useState)(!1),j=Object(J.a)(d,2),b=j[0],u=j[1],m={year:"numeric",month:"long",day:"numeric"};return Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("pedidos/".concat(c));case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(a=e.sent).msg){e.next=11;break}return e.abrupt("return",ne.a.fire("Error",a.msg,"error"));case 11:l(a.pedidos),u(!0);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),b&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)("h3",{children:"Mis Pedidos"}),0===o.length?Object(Se.jsxs)("div",{className:"centrar mt-5",children:[Object(Se.jsx)("b",{children:"No ha realizado ning\xfan pedido todav\xeda,"}),Object(Se.jsx)("div",{children:"pero te animamos a ver nuestro cat\xe1logo"}),Object(Se.jsx)(ce.a,{className:"mt-3",variant:"warning",onClick:function(){return e("/")},children:"Ver el cat\xe1logo"})]}):o.map((function(t){return Object(Se.jsxs)(Qe.a,{className:"mt-4",children:[Object(Se.jsx)(Qe.a.Header,{children:Object(Se.jsxs)(te.a,{className:"ms-2",children:[Object(Se.jsxs)(ae.a,{md:3,className:"mb-2",children:[Object(Se.jsx)(te.a,{children:"Pedido realizado"}),Object(Se.jsx)(te.a,{children:new Date(t.fecha).toLocaleDateString("es-ES",m)})]}),Object(Se.jsxs)(ae.a,{md:3,className:"mb-2",children:[Object(Se.jsx)(te.a,{children:"Total"}),Object(Se.jsxs)(te.a,{children:[t.total/100,"\u20ac"]})]}),Object(Se.jsxs)(ae.a,{className:"mb-2",children:[Object(Se.jsxs)(te.a,{className:"me-1 disable-float",children:["Pedido n\xba ",t._id]}),Object(Se.jsx)(te.a,{className:"disable-float",children:Object(Se.jsxs)("span",{children:[Object(Se.jsx)("button",{className:"botonLink",onClick:function(){return e("/panel/pedidos/detalles",{state:{pedido:t}})},children:"Ver los detalles del pedido"}),Object(Se.jsx)("div",{className:"vr ms-2 me-2"}),Object(Se.jsx)("button",{className:"botonLink",onClick:function(){return dt(a,t)},children:"Factura PDF"})]})})]})]})}),Object(Se.jsx)(Qe.a.Body,{children:t.producto.map((function(e){return Object(Se.jsxs)(te.a,{className:"align-items-center mb-3",children:[Object(Se.jsx)(ae.a,{xs:2,md:1,className:"d-flex justify-content-center align-items-center",style:{height:"5rem"},children:Object(Se.jsx)(ee.a,{style:{maxHeight:"70%"},src:e.producto.img?e.producto.img:"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(ae.a,{xs:10,md:11,children:[Object(Se.jsx)(s.b,{className:"linkProducto",style:{fontSize:"18px"},to:"/".concat(Object(Ve.a)(e.producto.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.nombre.replace(/\s+/g,"-"))),children:e.producto.nombre}),Object(Se.jsxs)("div",{style:{fontSize:"14px"},children:["Cantidad: ",e.unidades]})]})]},e.producto._id)}))})]},t._id)}))]})},Rt=function(){var e=Object(W.g)().state.pedido,t=Object(n.c)((function(e){return e.auth})).nombre,a=Object(G.useState)(!1),c=Object(J.a)(a,2),r=c[0],i=c[1];return Object(Se.jsxs)(Ae.a,{className:"animate__animated animate__fadeIn mb-5",children:[Object(Se.jsxs)(Qe.a,{className:"mt-4",children:[Object(Se.jsxs)(Qe.a.Header,{as:"h4",children:["Detalles del pedido",Object(Se.jsx)("div",{className:"vr ms-3 me-3"}),Object(Se.jsx)("button",{className:"botonLink",onClick:function(){return dt(t,e)},children:"Imprimir Factura"})]}),Object(Se.jsx)(Qe.a.Body,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsxs)(ae.a,{xs:12,sm:4,children:[Object(Se.jsx)(Qe.a.Title,{children:"Direcci\xf3n de facturaci\xf3n"}),Object(Se.jsxs)(Qe.a.Text,{children:[t,Object(Se.jsx)("br",{}),e.direccionFacturacion.line1," ",e.direccionFacturacion.line2,Object(Se.jsx)("br",{}),e.direccionFacturacion.postal_code,Object(Se.jsx)("br",{}),e.direccionFacturacion.city," ",e.direccionFacturacion.state,Object(Se.jsx)("br",{}),e.direccionFacturacion.country]})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:3,className:"mt-4 mt-sm-0",children:[Object(Se.jsx)(Qe.a.Title,{children:"Direcci\xf3n de env\xedo"}),Object(Se.jsxs)(Qe.a.Text,{children:[e.direccionEnvio.name,Object(Se.jsx)("br",{}),e.direccionEnvio.address.line1," ",e.direccionEnvio.address.line2,Object(Se.jsx)("br",{}),e.direccionEnvio.address.postal_code,Object(Se.jsx)("br",{}),e.direccionEnvio.address.city," ",e.direccionEnvio.address.state,Object(Se.jsx)("br",{}),e.direccionEnvio.address.country]})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:3,className:"mt-4 mt-sm-0",children:[Object(Se.jsx)(Qe.a.Title,{children:"M\xe9todo de pago"}),Object(Se.jsxs)(Qe.a.Text,{children:[Object(Se.jsx)(ee.a,{className:"mg-fluid",style:{height:"25px"},src:"https://images-na.ssl-images-amazon.com/images/G/30/checkout/payselect/card-logos-small/visa._CB658923706_.gif"}),Object(Se.jsxs)("span",{children:[" **** ",e.digitos]})]}),Object(Se.jsx)(Qe.a.Title,{children:"Fecha"}),Object(Se.jsx)(Qe.a.Text,{children:new Date(e.fecha).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]}),Object(Se.jsxs)(ae.a,{xs:12,sm:2,className:"mt-4 mt-sm-0",children:[Object(Se.jsx)(Qe.a.Title,{children:"Total:"}),Object(Se.jsx)(Qe.a.Text,{children:Object(Se.jsxs)("b",{children:["EUR ",e.total/100]})})]})]})})]}),e.producto.map((function(e){var t,a,c;return Object(Se.jsx)(Qe.a,{children:Object(Se.jsxs)(Qe.a.Body,{children:[Object(Se.jsxs)(te.a,{className:"align-items-center",children:[Object(Se.jsx)(ae.a,{xs:3,sm:3,md:2,className:"d-flex justify-content-center align-items-center",style:{height:"8rem"},children:Object(Se.jsx)(ee.a,{style:{maxHeight:"70%"},src:e.producto.img?e.producto.img:"/assets/no-image.png",fluid:!0})}),Object(Se.jsxs)(ae.a,{xs:9,sm:9,md:5,children:[Object(Se.jsx)(s.b,{className:"linkProducto",style:{fontSize:"18px"},to:"/".concat(Object(Ve.a)(e.producto.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.producto.nombre.replace(/\s+/g,"-"))),children:e.producto.nombre}),Object(Se.jsxs)("div",{style:{fontWeight:"normal",fontSize:"14px"},children:["Cantidad: ",e.unidades]}),Object(Se.jsxs)("b",{children:[e.producto.precio*e.unidades," \u20ac"]})]}),Object(Se.jsx)(ae.a,{xs:12,sm:12,md:5,className:"text-center mt-3",children:Object(Se.jsx)(ce.a,{variant:"outline-secondary",size:"sm",onClick:function(){return i(e.producto._id)},children:"Editar opini\xf3n sobre el producto"})})]}),Object(Se.jsx)(nt,{id:e.producto._id,setModalShow:i,show:r===e.producto._id,onHide:function(){return i("")},oldTitulo:null===(t=e.producto.opinion[0])||void 0===t?void 0:t.titulo,oldComentario:null===(a=e.producto.opinion[0])||void 0===a?void 0:a.comentario,oldRating:null===(c=e.producto.opinion[0])||void 0===c?void 0:c.rating})]})},e.producto._id)}))]})},Bt=function(){var e=Object(W.h)();return Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4",children:[Object(Se.jsx)("h5",{children:"Administraci\xf3n"}),Object(Se.jsxs)("div",{className:"list-group",children:[Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/usuarios")},children:"Usuarios"}),Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/categorias")},children:"Categor\xedas"}),Object(Se.jsx)("button",{className:"list-group-item list-group-item-action border-0 listaFondo",onClick:function(){return e("/panel/productos")},children:"Productos"})]})]})},Mt=["label","type"],Lt=["id","correo","nombre","usuarios","setUsuarios","setModalShow"],Vt=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,Mt),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},Ut=function(e){var t=e.id,a=e.correo,c=e.nombre,r=e.usuarios,n=e.setUsuarios,s=e.setModalShow,i=Object(K.a)(e,Lt),o=function(){var e=Object(le.a)(oe.a.mark((function e(c){var i,o,l;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be("usuarios/".concat(t),{oldCorreo:a,correo:c.correo,nombre:Object(Ve.b)(c.nombre)},"PUT");case 2:return i=e.sent,e.next=5,i.json();case 5:(o=e.sent).msg?ne.a.fire("Error",o.msg,"error"):((l=Object(R.a)(r))[r.findIndex((function(e){return e._id===t}))]=o,n(l),s(""));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Se.jsx)(Y.b,{initialValues:{correo:a,nombre:c},validationSchema:se.b({correo:se.c().email("El email es inv\xe1lido").required("Requerido"),nombre:se.c().min(2,"2 caracteres como m\xednimo").max(20,"20 caracteres como m\xe1ximo").required("Requerido")}),onSubmit:o,children:Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},i),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:"Editar usuario"})}),Object(Se.jsx)(tt.a.Body,{children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(Vt,{label:"Correo",name:"correo"}),Object(Se.jsx)(Vt,{label:"Nombre",name:"nombre"}),Object(Se.jsx)("div",{className:"d-grid",children:Object(Se.jsx)(ce.a,{className:"mt-4",type:"submit",variant:"primary",size:"lg",children:"Actualizar"})})]})}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:i.onHide,children:"Cerrar"})})]}))})},Gt=function(){var e=Object(G.useState)(!1),t=Object(J.a)(e,2),a=t[0],c=t[1],r=Object(G.useState)(!1),n=Object(J.a)(r,2),s=n[0],i=n[1],o=Object(G.useState)(!1),l=Object(J.a)(o,2),d=l[0],j=l[1];Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("usuarios");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a.usuarios),j(!0),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0.message),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var b=function(){var e=Object(le.a)(oe.a.mark((function e(t,r,n){var s,i,o,l,d,j;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=33;break}if(e.prev=1,!r){e.next=15;break}return e.next=5,be("usuarios/".concat(t),{},"DELETE");case 5:return s=e.sent,e.next=8,s.json();case 8:i=e.sent,(o=Object(R.a)(a))[a.findIndex((function(e){return e._id===i.usuario._id}))].estado=!1,c(o),ne.a.fire("Usuario deshabilitado","","success"),e.next=25;break;case 15:return e.next=17,be("usuarios/".concat(t),{estado:!0},"PUT");case 17:return l=e.sent,e.next=20,l.json();case 20:d=e.sent,(j=Object(R.a)(a))[a.findIndex((function(e){return e._id===d._id}))].estado=!0,c(j),ne.a.fire("Usuario habilitado","","success");case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 31:e.next=34;break;case 33:ne.a.fire("Usuario bloqueado","El webmaster ha bloqueado este usuario","info");case 34:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(t,a,c){return e.apply(this,arguments)}}();return d&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)("h3",{children:"Gesti\xf3n de Usuarios"}),Object(Se.jsxs)(Qe.a,{className:"mt-4",children:[Object(Se.jsx)(Qe.a.Header,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:6,sm:5,md:3,children:"Correo"}),Object(Se.jsx)(ae.a,{xs:0,sm:3,md:3,className:"disable-card-header2",children:"Nombre"}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:3,className:"disable-card-header",children:"Estado"}),Object(Se.jsx)(ae.a,{xs:6,sm:4,md:3})]})}),Object(Se.jsx)(Pe.a,{variant:"flush",children:a.map((function(e){return Object(Se.jsxs)(Pe.a.Item,{children:[Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:6,sm:5,md:3,children:e.correo}),Object(Se.jsx)(ae.a,{xs:0,sm:3,md:3,className:"disable-card-header2",children:e.nombre}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:3,className:"disable-card-header",children:e.estado?Object(Se.jsx)("span",{className:"text-success",children:"Activo"}):Object(Se.jsx)("span",{className:"text-danger",children:"Deshabilitado"})}),Object(Se.jsx)(ae.a,{xs:6,sm:4,md:3,children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)(ce.a,{className:"me-1 flex-grow-1",variant:"outline-primary",size:"sm",onClick:function(){return i(e._id)},children:"Editar"}),Object(Se.jsx)(ce.a,{className:"flex-grow-1",variant:e.estado?"outline-danger":"outline-success",size:"sm",onClick:function(){return b(e._id,e.estado,e.desactivar)},children:e.estado?"Eliminar":"Habilitar"})]})})]}),Object(Se.jsx)(Ut,{id:e._id,correo:e.correo,nombre:e.nombre,usuarios:a,setUsuarios:c,setModalShow:i,show:s===e._id,onHide:function(){return i("")}})]},e._id)}))})]})]})},Wt=["label","type"],Jt=["categorias","setCategorias","setModalShow"],Kt=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,Wt),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},Yt=function(e){var t=e.categorias,a=e.setCategorias,c=e.setModalShow,r=Object(K.a)(e,Jt),n=Object(G.useState)(),s=Object(J.a)(n,2),i=s[0],o=s[1],d=function(){var e=Object(le.a)(oe.a.mark((function e(r,n){var s,i,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("categorias",{nombre:Object(Ve.b)(r.nombre)},"POST");case 3:return s=e.sent,e.next=6,s.json();case 6:(i=e.sent).msg?ne.a.fire("Error",i.msg,"error"):((o=Object(R.a)(t)).push(i),a(o),j(i._id,o),n(),c(""),window.location.reload()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),ne.a.fire("Error",e.t0.message,"error");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(e,t){i&&Et(i,e,"categorias").then((function(e){if(e.msg)ne.a.fire("Error",e.msg,"error");else{var c=Object(R.a)(t);c[c.findIndex((function(t){return t._id===e._id}))]=e,a(c)}})).catch((function(e){return ne.a.fire("Error",e.message,"error")}))};return Object(Se.jsx)(Y.b,{initialValues:{nombre:""},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(23,"23 caracteres como m\xe1ximo").required("El nombre es obligatorio")}),onSubmit:function(e,t){var a=t.resetForm;return d(e,a)},children:Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},r),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:"Crear Categor\xeda"})}),Object(Se.jsx)(tt.a.Body,{children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(Kt,{label:"Nombre",name:"nombre",placeholder:"Nombre*"}),Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",className:"mt-4",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return o(e)}})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Crear"})})]})}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:r.onHide,children:"Cerrar"})})]}))})},Zt=function(){var e=Object(W.h)(),t=Object(G.useState)(!1),a=Object(J.a)(t,2),c=a[0],r=a[1],n=Object(G.useState)(!1),i=Object(J.a)(n,2),o=i[0],l=i[1],d=Object(G.useState)(!1),j=Object(J.a)(d,2),b=j[0],u=j[1];return Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("categorias?visibles=".concat('{"estado": {"$in" : ["true", "false"]}}','&ordenar=""'));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(a.categorias),u(!0),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),b&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)("h3",{children:"Gesti\xf3n de Categor\xedas"}),Object(Se.jsxs)(Qe.a,{className:"mt-4",children:[Object(Se.jsx)(Qe.a.Header,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:5,sm:4,md:4,children:"Nombre"}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:2,className:"disable-card-header",children:"Ventas"}),Object(Se.jsx)(ae.a,{xs:3,sm:4,md:2,children:"Estado"}),Object(Se.jsx)(ae.a,{xs:4,sm:4,md:4})]})}),Object(Se.jsx)(Pe.a,{variant:"flush",children:c.map((function(t){return Object(Se.jsx)(Pe.a.Item,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:5,sm:4,md:4,children:Object(Se.jsx)(s.b,{className:"linkProducto",to:"/".concat(Object(Ve.a)(t.nombre.replace(/\s+/g,"-"))),children:t.nombre})}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:2,className:"disable-card-header",children:t.vendidos}),Object(Se.jsx)(ae.a,{xs:3,sm:4,md:2,children:t.estado?Object(Se.jsx)("span",{className:"text-success",children:"Activa"}):Object(Se.jsx)("span",{className:"text-danger",children:"Deshabilitada"})}),Object(Se.jsx)(ae.a,{xs:4,sm:4,md:4,className:"mt-2 mt-sm-0",children:Object(Se.jsx)("div",{className:"d-grid",children:Object(Se.jsx)(ce.a,{className:"me-1",variant:"outline-primary",size:"sm",onClick:function(){return e("/panel/categorias/".concat(Object(Ve.a)(t.nombre.replace(/\s+/g,"-"))))},children:"Editar"})})})]})},t._id)}))})]}),Object(Se.jsx)(ce.a,{className:"mt-4",onClick:function(){return l("open")},children:"Agregar Categor\xeda"}),Object(Se.jsx)(Yt,{categorias:c,setCategorias:r,setModalShow:l,setChecking:u,show:"open"===o,onHide:function(){return l("")}})]})},$t=["label","type"],Qt=["subcategoria","subcategorias","setSubCategorias","setModalShow"],Xt=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,$t),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},ea=function(e){var t=e.subcategoria,a=e.subcategorias,c=e.setSubCategorias,r=e.setModalShow,n=Object(K.a)(e,Qt),s=Object(G.useState)(),i=Object(J.a)(s,2),o=i[0],d=i[1],j=function(){var e=Object(le.a)(oe.a.mark((function e(n){var s,i,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.nombre===n.nombre){e.next=8;break}return e.next=3,be("categorias/subcategoria/".concat(t._id),{oldNombre:t.nombre,nombre:Object(Ve.b)(n.nombre)},"PUT");case 3:return s=e.sent,e.next=6,s.json();case 6:(i=e.sent).msg?ne.a.fire("Error",i.msg,"error"):((o=Object(R.a)(a))[o.findIndex((function(e){return e._id===i._id}))].nombre=i.nombre,c(o));case 8:b(),r(""),window.location.reload();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){o&&Et(o,t._id,"subcategorias").then((function(e){if(e.msg)ne.a.fire("Error",e.msg,"error");else{var t=Object(R.a)(a);t[t.findIndex((function(t){return t._id===e._id}))].img=e.img,c(t)}})).catch((function(e){return ne.a.fire("Error",e,"error")}))};return Object(Se.jsx)(Y.b,{initialValues:{nombre:t.nombre},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(23,"23 caracteres como m\xe1ximo").required("El nombre es obligatorio")}),onSubmit:j,children:Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},n),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:"Editar Subcategor\xeda"})}),Object(Se.jsx)(tt.a.Body,{children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsxs)(te.a,{children:[Object(Se.jsxs)(ae.a,{xs:12,lg:8,children:[Object(Se.jsx)(Xt,{label:"Nombre",name:"nombre"}),Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",className:"mt-4",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return d(e)}})]})]}),Object(Se.jsx)(ae.a,{xs:12,lg:4,className:"centrarImagen",children:Object(Se.jsx)("div",{className:"text-center",children:Object(Se.jsx)(ee.a,{src:t.img?t.img:"/assets/no-image.png",fluid:!0})})})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Actualizar"})})]})}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:n.onHide,children:"Cerrar"})})]}))})},ta=["label","type"],aa=["categoria","setCategoria","subcategorias","setSubCategorias","setModalShowAdd"],ca=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,ta),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},ra=function(e){var t=e.categoria,a=e.setCategoria,c=(e.subcategorias,e.setSubCategorias),r=e.setModalShowAdd,n=Object(K.a)(e,aa),s=Object(G.useState)(),i=Object(J.a)(s,2),o=i[0],d=i[1],j=function(){var e=Object(le.a)(oe.a.mark((function e(n,s){var i,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("categorias/subcategoria",{idCategoria:t._id,nombre:Object(Ve.b)(n.nombre)},"POST");case 3:return i=e.sent,e.next=6,i.json();case 6:(o=e.sent).msg?ne.a.fire("Error",o.msg,"error"):(c(o.categoria.subcategorias),a(o.categoria),b(o.subcategoria._id,o.categoria,o.categoria.subcategorias),s(),r(""),setTimeout((function(){window.location.reload()}),1e3)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),ne.a.fire("Error",e.t0.message,"error");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(e,t,r){o&&Et(o,e,"subcategorias").then((function(e){if(e.msg)ne.a.fire("Error",e.msg,"error");else{var n=Object(R.a)(r);n[n.findIndex((function(t){return t._id===e._id}))]=e,c(n);var s=t;s.subcategorias=n,a(s)}})).catch((function(e){return ne.a.fire("Error",e.message,"error")}))};return Object(Se.jsx)(Y.b,{initialValues:{nombre:""},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(23,"23 caracteres como m\xe1ximo").required("El nombre es obligatorio")}),onSubmit:function(e,t){var a=t.resetForm;return j(e,a)},children:Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},n),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:"Crear Subcategor\xeda"})}),Object(Se.jsx)(tt.a.Body,{children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(ca,{label:"Nombre",name:"nombre",placeholder:"Nombre*"}),Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",className:"mt-4",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return d(e)}})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Crear"})})]})}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:n.onHide,children:"Cerrar"})})]}))})},na=["label","type"],sa=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,na),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},ia=function(){var e=Object(W.i)().CategoriaNombre,t=Object(W.h)(),a=Object(G.useState)(),c=Object(J.a)(a,2),r=c[0],n=c[1],i=Object(G.useState)(),o=Object(J.a)(i,2),l=o[0],d=o[1],j=Object(G.useState)(),b=Object(J.a)(j,2),u=b[0],m=b[1],x=Object(G.useState)(!1),h=Object(J.a)(x,2),O=h[0],p=h[1],f=Object(G.useState)(!1),g=Object(J.a)(f,2),v=g[0],N=g[1],y=Object(G.useState)(!1),k=Object(J.a)(y,2),C=k[0],w=k[1];Object(G.useEffect)((function(){function t(){return(t=Object(le.a)(oe.a.mark((function t(){var a,c;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be("categorias/".concat(e.replace(/-/g," ")));case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,n(c.categoria),d(c.categoria.subcategorias),w(!0),t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",ne.a.fire("Error",t.t0.message,"error"));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]);var _=function(){var e=Object(le.a)(oe.a.mark((function e(){var t,a,c,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.desactivar){e.next=29;break}if(e.prev=1,!r.estado){e.next=13;break}return e.next=5,be("categorias/".concat(r._id),{},"DELETE");case 5:return t=e.sent,e.next=8,t.json();case 8:a=e.sent,n(a),window.location.reload(),e.next=21;break;case 13:return e.next=15,be("categorias/".concat(r._id),{estado:!0},"PUT");case 15:return c=e.sent,e.next=18,c.json();case 18:s=e.sent,n(s),window.location.reload();case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 27:e.next=30;break;case 29:ne.a.fire("Categor\xeda bloqueada","El webmaster ha bloqueado esta categor\xeda","info");case 30:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(le.a)(oe.a.mark((function e(a){var c,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.nombre===a.nombre){e.next=8;break}return e.next=3,be("categorias/".concat(r._id),{oldNombre:r.nombre,nombre:Object(Ve.b)(a.nombre)},"PUT");case 3:return c=e.sent,e.next=6,c.json();case 6:(s=e.sent).msg?ne.a.fire("Error",s.msg,"error"):(n(s),ne.a.fire("Nombre actualizado","","success"),t("/panel/categorias/".concat(Object(Ve.a)(s.nombre.replace(/\s+/g,"-"))),{replace:!0}),window.location.reload());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(le.a)(oe.a.mark((function e(t,a,c){var r,n,s,i,o,j;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=33;break}if(e.prev=1,!a){e.next=15;break}return e.next=5,be("categorias/subcategoria/".concat(t),{},"DELETE");case 5:return r=e.sent,e.next=8,r.json();case 8:n=e.sent,(s=Object(R.a)(l))[s.findIndex((function(e){return e._id===n._id}))].estado=!1,d(s),window.location.reload(),e.next=25;break;case 15:return e.next=17,be("categorias/subcategoria/".concat(t),{estado:!0},"PUT");case 17:return i=e.sent,e.next=20,i.json();case 20:o=e.sent,(j=Object(R.a)(l))[j.findIndex((function(e){return e._id===o._id}))].estado=!0,d(j),window.location.reload();case 25:e.next=31;break;case 27:return e.prev=27,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0,"error"));case 31:e.next=34;break;case 33:ne.a.fire("Subcategor\xeda bloqueada","El webmaster ha bloqueado esta subcategor\xeda","info");case 34:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(t,a,c){return e.apply(this,arguments)}}();return C&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)(Y.b,{initialValues:{nombre:r.nombre},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(23,"23 caracteres como m\xe1ximo").required("El nombre es obligatorio")}),onSubmit:S,children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)("h3",{className:"mb-3",children:"Editar Categor\xeda"}),Object(Se.jsxs)(te.a,{children:[Object(Se.jsxs)(ae.a,{xs:12,lg:8,children:[Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:8,className:"mt-auto",children:Object(Se.jsx)(sa,{label:"Nombre",name:"nombre"})}),Object(Se.jsx)(ae.a,{xs:4,className:"mt-auto",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Actualizar"})})]}),Object(Se.jsxs)(te.a,{className:"mb-4 mb-lg-0",children:[Object(Se.jsx)(ae.a,{xs:8,className:"mt-auto",children:Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",className:"mt-4",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return m(e)}})]})}),Object(Se.jsx)(ae.a,{xs:4,className:"mt-auto",children:Object(Se.jsx)(ce.a,{onClick:function(){u&&Et(u,r._id,"categorias").then((function(e){e.msg?ne.a.fire("Error",e.msg,"error"):(n(e),ne.a.fire("Imagen actualizada","","success"))})).catch((function(e){return ne.a.fire("Error",e,"error")}))},children:"Actualizar"})})]})]}),Object(Se.jsx)(ae.a,{xs:12,lg:4,className:"d-flex justify-content-center align-items-center",children:Object(Se.jsx)("div",{style:{height:"14rem"},children:Object(Se.jsx)(ee.a,{className:"mh-100",src:r.img?r.img:"/assets/no-image.png"})})})]}),Object(Se.jsx)("h5",{className:"mt-4",children:"Subcategor\xedas"}),Object(Se.jsx)(Pe.a,{variant:"flush",children:0!==r.subcategorias.length?r.subcategorias.map((function(e){return Object(Se.jsxs)(Pe.a.Item,{children:[Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:5,sm:5,md:4,children:Object(Se.jsx)(s.b,{className:"linkProducto",to:"/".concat(Object(Ve.a)(r.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(e.nombre.replace(/\s+/g,"-"))),children:e.nombre})}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:3,className:"disable-card-header",children:e.estado?Object(Se.jsx)("span",{className:"text-success",children:"Activa"}):Object(Se.jsx)("span",{className:"text-danger",children:"Deshabilitada"})}),Object(Se.jsx)(ae.a,{xs:7,sm:7,md:5,children:Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)(ce.a,{className:"me-1 flex-grow-1",variant:"outline-primary",size:"sm",onClick:function(){return p(e._id)},children:"Editar"}),Object(Se.jsx)(ce.a,{className:"flex-grow-1",variant:e.estado?"outline-danger":"outline-success",size:"sm",onClick:function(){return E(e._id,e.estado,e.desactivar)},children:e.estado?"Eliminar":"Habilitar"})]})})]}),Object(Se.jsx)(ea,{subcategoria:e,subcategorias:l,setSubCategorias:d,setModalShow:p,show:O===e._id,onHide:function(){return p("")}})]},e._id)})):Object(Se.jsx)(Pe.a.Item,{children:"No tiene subcategor\xedas"},r._id)}),Object(Se.jsx)(ce.a,{className:"mt-2 mb-2",onClick:function(){return N("openSub")},children:"Agregar Subcategor\xeda"}),Object(Se.jsxs)("h5",{className:"mt-4 mb-2",children:["Estado: ",r.estado?Object(Se.jsx)("span",{className:"text-success",children:"Activa"}):Object(Se.jsx)("span",{className:"text-danger",children:"Deshabilitada"})]}),Object(Se.jsx)(ce.a,{variant:r.estado?"danger":"success",onClick:function(){return _()},children:r.estado?"Eliminar":"Activar"})]})}),Object(Se.jsx)(ra,{categoria:r,setCategoria:n,subcategorias:l,setSubCategorias:d,setModalShowAdd:N,show:"openSub"===v,onHide:function(){return N("")}})]})},oa=a(185),la=["label","type"],da=["categorias","setModalShow"],ja=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,la),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},ba=function(e){var t=e.categorias,a=e.setModalShow,c=Object(K.a)(e,da),r=Object(G.useState)(),n=Object(J.a)(r,2),s=n[0],i=n[1],o=Object(G.useState)(),d=Object(J.a)(o,2),j=d[0],b=d[1],u=Object(G.useState)(),m=Object(J.a)(u,2),x=m[0],h=m[1],O=function(){var e=Object(le.a)(oe.a.mark((function e(t,c){var r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("productos",{nombre:Object(Ve.b)(t.nombre.replace(/-/g," ")),descripcion:t.descripcion,precio:t.precio,stock:t.stock,categoria:j._id,subcategoria:x},"POST");case 3:return r=e.sent,e.next=6,r.json();case 6:(n=e.sent).msg?ne.a.fire("Error",n.msg,"error"):(p(n._id),a(""),window.location.reload()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),ne.a.fire("Error",e.t0.message,"error");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(e){s&&Et(s,e,"productos").then((function(e){e.msg&&ne.a.fire("Error",e.msg,"error")})).catch((function(e){return ne.a.fire("Error",e.message,"error")}))};return Object(Se.jsx)(Y.b,{initialValues:{nombre:"",descripcion:"",precio:"",stock:""},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(34,"34 caracteres como m\xe1ximo").required("El nombre es obligatorio"),descripcion:se.c().min(2,"2 caracteres como m\xednimo").max(2e3,"2000 caracteres como m\xe1ximo").required("La descripci\xf3n es obligatoria"),precio:se.a().typeError("Debe especificar un n\xfamero").required("Requerido"),stock:se.a().typeError("Debe especificar un n\xfamero").required("Requerido")}),onSubmit:function(e,t){var a=t.resetForm;return O(e,a)},children:Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},c),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:"Crear Producto"})}),Object(Se.jsx)(tt.a.Body,{children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(ja,{label:"Nombre",name:"nombre",placeholder:"Nombre*"}),Object(Se.jsxs)(te.a,{className:"mt-2 mb-4",children:[Object(Se.jsxs)(ae.a,{children:[Object(Se.jsx)("h5",{className:"mt-3",children:"Categor\xeda"}),Object(Se.jsxs)(oa.a,{defaultValue:"default","aria-label":"Default select example",onChange:function(e){b(JSON.parse(e.target.value))},children:[Object(Se.jsx)("option",{value:"default",disabled:!0,hidden:!0,children:"Selecciona la categor\xeda"}),t.map((function(e){return Object(Se.jsx)("option",{value:JSON.stringify(e),children:e.nombre},e._id)}))]})]}),Object(Se.jsxs)(ae.a,{children:[Object(Se.jsx)("h5",{className:"mt-3",children:"Subcategor\xeda"}),Object(Se.jsxs)(oa.a,{disabled:!j,defaultValue:"default","aria-label":"Default select example",onChange:function(e){h(e.target.value)},children:[Object(Se.jsx)("option",{value:"default",disabled:!0,hidden:!0,children:"Selecciona la subcategor\xeda"}),j?j.subcategorias.map((function(e){return Object(Se.jsx)("option",{value:e._id,children:e.nombre},e._id)})):null]})]})]}),Object(Se.jsx)(ja,{label:"Descripci\xf3n",name:"descripcion",type:"textarea",rows:"6",placeholder:"Descripci\xf3n*"}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(ja,{label:"Precio",name:"precio",placeholder:"Precio*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(ja,{label:"Stock",name:"stock",placeholder:"Stock*"})})]}),Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",className:"mt-3",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return i(e)}})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Crear"})})]})}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:c.onHide,children:"Cerrar"})})]}))})},ua=function(){var e=Object(W.h)(),t=Object(G.useState)(!1),a=Object(J.a)(t,2),c=a[0],r=a[1],n=Object(G.useState)(!1),i=Object(J.a)(n,2),o=i[0],l=i[1],d=Object(G.useState)(!1),j=Object(J.a)(d,2),b=j[0],u=j[1],m=Object(G.useState)(!1),x=Object(J.a)(m,2),h=x[0],O=x[1];return Object(G.useEffect)((function(){function e(){return(e=Object(le.a)(oe.a.mark((function e(){var t,a,c,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be("productos?visibles=".concat('{"estado": {"$in" : ["true", "false"]}}','&ordenar=""'));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,l(a.productos),e.next=10,be("categorias?visibles=".concat('{"estado": {"$in" : ["true", "false"]}}','&ordenar=""'));case 10:return c=e.sent,e.next=13,c.json();case 13:n=e.sent,r(n.categorias),O(!0),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),h&&Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:[Object(Se.jsx)("h3",{children:"Gesti\xf3n de Productos"}),Object(Se.jsxs)(Qe.a,{className:"mt-4",children:[Object(Se.jsx)(Qe.a.Header,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:5,sm:4,md:4,children:"Nombre"}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:2,className:"disable-card-header",children:"Ventas"}),Object(Se.jsx)(ae.a,{xs:3,sm:4,md:2,children:"Estado"}),Object(Se.jsx)(ae.a,{xs:4,sm:4,md:4})]})}),Object(Se.jsx)(Pe.a,{variant:"flush",children:o.map((function(t){return Object(Se.jsx)(Pe.a.Item,{children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:5,sm:4,md:4,children:Object(Se.jsx)(s.b,{className:"linkProducto",to:"/".concat(Object(Ve.a)(t.categoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(t.subcategoria.nombre.replace(/\s+/g,"-")),"/").concat(Object(Ve.a)(t.nombre.replace(/\s+/g,"-"))),children:t.nombre})}),Object(Se.jsx)(ae.a,{xs:0,sm:0,md:2,className:"disable-card-header",children:t.vendido}),Object(Se.jsx)(ae.a,{xs:3,sm:4,md:2,children:t.estado?Object(Se.jsx)("span",{className:"text-success",children:"Activo"}):Object(Se.jsx)("span",{className:"text-danger",children:"Deshabilitado"})}),Object(Se.jsx)(ae.a,{xs:4,sm:4,md:4,className:"mt-2 mt-sm-0",children:Object(Se.jsx)("div",{className:"d-grid",children:Object(Se.jsx)(ce.a,{className:"me-1",variant:"outline-primary",size:"sm",onClick:function(){return e("/panel/productos/".concat(Object(Ve.a)(t.nombre.replace(/\s+/g,"-"))))},children:"Editar"})})})]})},t._id)}))})]}),Object(Se.jsx)(ce.a,{className:"mt-4",onClick:function(){return u("open")},children:"Agregar Producto"}),Object(Se.jsx)(ba,{categorias:c,setModalShow:u,show:"open"===b,onHide:function(){return u("")}})]})},ma=["label","type"],xa=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,ma),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{as:"h5",htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},ha=function(){var e=Object(W.i)().ProductoNombre,t=Object(W.h)(),a=Object(G.useState)(),c=Object(J.a)(a,2),r=c[0],n=c[1],s=Object(G.useState)(!1),i=Object(J.a)(s,2),o=i[0],d=i[1],j=Object(G.useState)(),b=Object(J.a)(j,2),u=b[0],m=b[1],x=Object(G.useState)(),h=Object(J.a)(x,2),O=h[0],p=h[1],f=Object(G.useState)(),g=Object(J.a)(f,2),v=g[0],N=g[1],y=Object(G.useState)(!1),k=Object(J.a)(y,2),C=k[0],w=k[1];Object(G.useEffect)((function(){function t(){return(t=Object(le.a)(oe.a.mark((function t(){var a,c,r,s;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be("productos/producto/".concat(e.replace(/-/g," ")));case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,n(c.producto),m(c.producto.categoria),p(c.producto.subcategoria._id),t.next=12,be("categorias?visibles=".concat('{"estado": {"$in" : ["true", "false"]}}','&ordenar=""'));case 12:return r=t.sent,t.next=15,r.json();case 15:s=t.sent,d(s.categorias),w(!0),t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",ne.a.fire("Error",t.t0.message,"error"));case 24:case"end":return t.stop()}}),t,null,[[0,20]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]);var _=function(){var e=Object(le.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.desactivar){e.next=21;break}if(e.prev=1,!r.estado){e.next=9;break}return e.next=5,be("productos/".concat(r._id),{},"DELETE");case 5:n((function(e){return Object(l.a)(Object(l.a)({},e),{},{estado:!1})})),ne.a.fire("Producto deshabilitado","","success"),e.next=13;break;case 9:return e.next=11,be("productos/".concat(r._id),{estado:!0},"PUT");case 11:n((function(e){return Object(l.a)(Object(l.a)({},e),{},{estado:!0})})),ne.a.fire("Producto habilitado","","success");case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",ne.a.fire("Error",e.t0.message,"error"));case 19:e.next=22;break;case 21:ne.a.fire("Producto bloqueado","El webmaster ha bloqueado este producto","info");case 22:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(le.a)(oe.a.mark((function e(a){var c,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.subcategorias.find((function(e){return e._id===O}))){e.next=10;break}return e.next=3,be("productos/".concat(r._id),{nombre:Object(Ve.b)(a.nombre.replace(/-/g," ")),descripcion:a.descripcion,precio:a.precio,stock:a.stock,categoria:u._id,subcategoria:O,oldSubcategoria:r.subcategoria},"PUT");case 3:return c=e.sent,e.next=6,c.json();case 6:(s=e.sent).msg?ne.a.fire("Error",s.msg,"error"):(v?E():n(s),ne.a.fire("Producto actualizado","","success"),t("/panel/productos/".concat(Object(Ve.a)(s.nombre.replace(/\s+/g,"-"))),{replace:!0})),e.next=11;break;case 10:ne.a.fire("Subcategor\xeda incorrecta","Seleccione otra subcategor\xeda","error");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){v&&Et(v,r._id,"productos").then((function(e){e.msg?ne.a.fire("Error",e.msg,"error"):n(e)})).catch((function(e){return ne.a.fire("Error",e,"error")}))};return C&&Object(Se.jsx)("div",{className:"animate__animated animate__fadeIn mt-4 mb-5",children:Object(Se.jsx)(Y.b,{initialValues:{nombre:r.nombre,descripcion:r.descripcion,precio:r.precio,stock:r.stock},validationSchema:se.b({nombre:se.c().min(2,"2 caracteres como m\xednimo").max(34,"34 caracteres como m\xe1ximo").required("El nombre es obligatorio"),descripcion:se.c().min(2,"2 caracteres como m\xednimo").max(2e3,"2000 caracteres como m\xe1ximo").required("La descripci\xf3n es obligatoria"),precio:se.a().typeError("Debe especificar un n\xfamero").required("Requerido"),stock:se.a().typeError("Debe especificar un n\xfamero").required("Requerido")}),onSubmit:S,children:Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)("h3",{className:"mb-3",children:"Editar Producto"}),Object(Se.jsxs)(te.a,{children:[Object(Se.jsxs)(ae.a,{xs:12,lg:8,children:[Object(Se.jsx)(te.a,{children:Object(Se.jsx)(xa,{label:"Nombre",name:"nombre"})}),Object(Se.jsx)(te.a,{className:"mb-4 mb-lg-0",children:Object(Se.jsxs)(Z.a,{id:"fileUpload",controlId:"formFile",className:"mt-4",children:[Object(Se.jsx)($.a,{style:{marginBottom:"-1px"},children:Object(Se.jsx)("h5",{children:"Imagen"})}),Object(Se.jsx)(Q.a,{type:"file",accept:"image/*",onChange:function(e){return N(e)}})]})})]}),Object(Se.jsx)(ae.a,{xs:12,lg:4,className:"d-flex justify-content-center align-items-center",children:Object(Se.jsx)("div",{style:{height:"14rem"},children:Object(Se.jsx)(ee.a,{className:"mh-100",src:r.img?r.img:"/assets/no-image.png"})})})]}),Object(Se.jsxs)(te.a,{className:"mt-2 mb-4",children:[Object(Se.jsxs)(ae.a,{children:[Object(Se.jsx)("h5",{className:"mt-3",children:"Categor\xeda"}),Object(Se.jsxs)(oa.a,{defaultValue:r.categoria._id,"aria-label":"Default select example",onChange:function(e){m(JSON.parse(e.target.value))},children:[Object(Se.jsx)("option",{value:r.categoria._id,disabled:!0,hidden:!0,children:r.categoria.nombre}),o.map((function(e){return Object(Se.jsx)("option",{value:JSON.stringify(e),children:e.nombre},e._id)}))]})]}),Object(Se.jsxs)(ae.a,{children:[Object(Se.jsx)("h5",{className:"mt-3",children:"Subcategor\xeda"}),Object(Se.jsxs)(oa.a,{defaultValue:r.subcategoria._id,"aria-label":"Default select example",onChange:function(e){p(e.target.value)},children:[Object(Se.jsx)("option",{value:r.subcategoria._id,disabled:!0,hidden:!0,children:r.subcategoria.nombre}),u?u.subcategorias.map((function(e){return Object(Se.jsx)("option",{value:e._id,children:e.nombre},e._id)})):null]})]})]}),Object(Se.jsx)(xa,{label:"Descripci\xf3n",name:"descripcion",type:"textarea",rows:"6"}),Object(Se.jsxs)(te.a,{className:"mt-3",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(xa,{label:"Precio",name:"precio"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(xa,{label:"Stock",name:"stock"})})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Actualizar"})}),Object(Se.jsxs)("h5",{className:"mt-4 mb-2",children:["Estado: ",r.estado?Object(Se.jsx)("span",{className:"text-success",children:"Activo"}):Object(Se.jsx)("span",{className:"text-danger",children:"Deshabilitado"})]}),Object(Se.jsx)(ce.a,{variant:r.estado?"danger":"success",onClick:function(){return _()},children:r.estado?"Eliminar":"Activar"})]})})})},Oa=function(){var e=Object(n.c)((function(e){return e.auth})).rol,t=Object(W.g)(),a=t.pathname,c=t.search;return localStorage.setItem("lastPath",a+c),Object(Se.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[Object(Se.jsx)(Ye,{}),Object(Se.jsx)(Ae.a,{children:"USER_ROLE"===e?Object(Se.jsxs)(W.d,{children:[Object(Se.jsx)(W.b,{path:"datos",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:2,children:Object(Se.jsx)(St,{})}),Object(Se.jsx)(ae.a,{md:10,children:Object(Se.jsx)(Pt,{})})]})}),Object(Se.jsx)(W.b,{path:"deseos",element:Object(Se.jsx)(Ft,{})}),Object(Se.jsx)(W.b,{path:"valoraciones",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:2,children:Object(Se.jsx)(St,{})}),Object(Se.jsx)(ae.a,{md:10,children:Object(Se.jsx)(qt,{})})]})}),Object(Se.jsx)(W.b,{path:"pedidos",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:2,children:Object(Se.jsx)(St,{})}),Object(Se.jsx)(ae.a,{md:10,children:Object(Se.jsx)(Ht,{})})]})}),Object(Se.jsx)(W.b,{path:"pedidos/detalles",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:2,children:Object(Se.jsx)(St,{})}),Object(Se.jsx)(ae.a,{md:10,children:Object(Se.jsx)(Rt,{})})]})}),Object(Se.jsx)(W.b,{path:"/",element:Object(Se.jsx)(W.a,{to:"/panel/datos"})}),Object(Se.jsx)(W.b,{path:"/*",element:Object(Se.jsx)(W.a,{to:"/"})})]}):Object(Se.jsxs)(W.d,{children:[Object(Se.jsx)(W.b,{path:"usuarios",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:12,lg:2,children:Object(Se.jsx)(Bt,{})}),Object(Se.jsx)(ae.a,{md:12,lg:10,children:Object(Se.jsx)(Gt,{})})]})}),Object(Se.jsx)(W.b,{path:"categorias",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:12,lg:2,children:Object(Se.jsx)(Bt,{})}),Object(Se.jsx)(ae.a,{md:12,lg:10,children:Object(Se.jsx)(Zt,{})})]})}),Object(Se.jsx)(W.b,{path:"categorias/:CategoriaNombre",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:12,lg:2,children:Object(Se.jsx)(Bt,{})}),Object(Se.jsx)(ae.a,{md:12,lg:10,children:Object(Se.jsx)(ia,{})})]})}),Object(Se.jsx)(W.b,{path:"productos",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:12,lg:2,children:Object(Se.jsx)(Bt,{})}),Object(Se.jsx)(ae.a,{md:12,lg:10,children:Object(Se.jsx)(ua,{})})]})}),Object(Se.jsx)(W.b,{path:"productos/:ProductoNombre",element:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{md:12,lg:2,children:Object(Se.jsx)(Bt,{})}),Object(Se.jsx)(ae.a,{md:12,lg:10,children:Object(Se.jsx)(ha,{})})]})}),Object(Se.jsx)(W.b,{path:"/",element:Object(Se.jsx)(W.a,{to:"/panel/usuarios"})}),Object(Se.jsx)(W.b,{path:"/*",element:Object(Se.jsx)(W.a,{to:"/"})})]})}),Object(Se.jsx)(Ct,{})]})},pa=function(e){return{type:w,payload:e}},fa=function(e){return{type:_,payload:e}},ga=function(e){return{type:S,payload:e}},va=function(e){return function(){var t=Object(le.a)(oe.a.mark((function t(a,c){var r,n,s,i;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c().auth.uid,t.prev=1,t.next=4,be("usuarios/envio/".concat(r),e,"POST");case 4:return s=t.sent,t.next=7,s.json();case 7:return(i=t.sent).msg?ne.a.fire("Error",i.msg,"error"):(n=i.envio.find((function(t){return t.direccion.calle===e.direccion.calle&&t.direccion.numero===e.direccion.numero})),e._id=n._id,a(Na(e))),t.abrupt("return",Promise.resolve(n._id));case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}()},Na=function(e){return{type:E,payload:e}},ya=function(e){return function(){var t=Object(le.a)(oe.a.mark((function t(a,c){var r,n,s,i;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c().auth.uid,t.prev=1,t.next=4,be("usuarios/envio/".concat(r),e,"PUT");case 4:return n=t.sent,t.next=7,n.json();case 7:(s=t.sent).msg?ne.a.fire("Error",s.msg,"error"):(i=s.envio.find((function(t){return t._id===e._id})),a(ka(i))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a){return t.apply(this,arguments)}}()},ka=function(e){return{type:I,payload:e}},Ca=function(e){return{type:T,payload:e}},wa=function(e){return{type:P,payload:e}},_a=function(e){return function(){var t=Object(le.a)(oe.a.mark((function t(a,c){var r,n,s,i,o,l,d,j,b;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c().auth.uid,n=e.poblacion,s=e.pais,i=e.calle,o=e.numero,l=e.codigo,d=e.provincia,t.prev=2,t.next=5,be("usuarios/facturacion/".concat(r),{poblacion:n,pais:s,calle:i,numero:o,codigo:l,provincia:d},"POST");case 5:return j=t.sent,t.next=8,j.json();case 8:(b=t.sent).msg?ne.a.fire("Error",b.msg,"error"):a(Sa(e)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()},Sa=function(e){return{type:F,payload:e}},Ea=function(){return{type:A}},Ia=["label","type"],Ta=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,Ia),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},Pa=function(){var e=Object(n.b)(),t=Object(n.c)((function(e){return e.auth})),a=t.uid,c=t.nombre,r=Object(n.c)((function(e){return e.shipping})).activo,s=function(){var t=Object(le.a)(oe.a.mark((function t(c){var n,s,i,o,l,d,j,b,u,m;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=c.direccion,i=c.nombre,o=c.telefono,r){t.next=7;break}return l={direccion:s,nombre:i,telefono:o},t.next=5,e(va(l)).then((function(e){j=e}));case 5:t.next=11;break;case 7:b=r._id,e(ya(l={_id:b,direccion:s,nombre:i,telefono:o})),j=b;case 11:if(!document.querySelector("input[name=checkbox1]:checked")){t.next=21;break}return e(ga(j)),l={predeterminado:j},t.next=16,be("usuarios/".concat(a),l,"PUT");case 16:return u=t.sent,t.next=19,u.json();case 19:(d=t.sent).msg?(console.log("Hola Mundo"),ne.a.fire("Error",d.msg,"error")):(m=d.usuario.envio.find((function(e){return e._id===j})),e(ya(m)),e(function(){var e=Object(le.a)(oe.a.mark((function e(t,a){var c,r,n,s,i,o,l,d,j,b,u;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a().auth.uid,e.prev=1,e.next=4,be("usuarios/".concat(c));case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(n=e.sent).msg){e.next=12;break}ne.a.fire("Error",n.msg,"error"),e.next=32;break;case 12:if(!((s=n.usuario).envio.length>1)){e.next=32;break}return i=s.envio.findIndex((function(e){return e._id===s.predeterminado})),o=s.envio.splice(i,1),l=Object(J.a)(o,1),d=l[0],s.envio.unshift(d),e.prev=18,j=s.envio,e.next=22,be("usuarios/".concat(c),{envio:j},"PUT");case 22:return b=e.sent,e.next=25,b.json();case 25:(u=e.sent).msg?ne.a.fire("Error",u.msg,"error"):t(wa(s.envio)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),console.log(e.t0);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(1),console.log(e.t1);case 37:case"end":return e.stop()}}),e,null,[[1,34],[18,29]])})));return function(t,a){return e.apply(this,arguments)}}()));case 21:(null===(n=document.querySelector("input[name=checkbox2]:checked"))||void 0===n?void 0:n.id)&&e(_a(s)),e(pe(!1)),e(fa());case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Se.jsx)(Y.b,{initialValues:{direccion:{poblacion:(null===r||void 0===r?void 0:r.direccion.poblacion)||"",pais:(null===r||void 0===r?void 0:r.direccion.pais)||"",calle:(null===r||void 0===r?void 0:r.direccion.calle)||"",numero:(null===r||void 0===r?void 0:r.direccion.numero)||"",codigo:(null===r||void 0===r?void 0:r.direccion.codigo)||"",provincia:(null===r||void 0===r?void 0:r.direccion.provincia)||""},nombre:(null===r||void 0===r?void 0:r.nombre)||"",telefono:(null===r||void 0===r?void 0:r.telefono)||""},validationSchema:se.b({nombre:se.c().required("Requerido"),telefono:se.a().test("len","El tel\xe9fono debe tener 9 n\xfameros",(function(e){return e&&9===e.toString().length})).typeError("Debe especificar un n\xfamero").required("Requerido"),direccion:se.b({poblacion:se.c().required("Requerido"),pais:se.c().required("Requerido"),calle:se.c().required("Requerido"),numero:se.c().required("Requerido"),codigo:se.a().test("len","El c\xf3digo debe tener 5 n\xfameros",(function(e){return e&&5===e.toString().length})).typeError("Debe especificar un n\xfamero").required("Requerido"),provincia:se.c().required("Requerido")})}),onSubmit:s,children:function(e){var t=e.setFieldValue;return Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(ce.a,{className:"float-end",variant:"warning",onClick:function(){return function(e){e("nombre",c),e("telefono","666666666"),e("direccion.calle","Calle Marina"),e("direccion.numero","N\xfamero 7, 8\xba A"),e("direccion.pais","Espa\xf1a"),e("direccion.codigo","21003"),e("direccion.poblacion","Huelva"),e("direccion.provincia","Huelva")}(t)},children:"Rellenar autom\xe1ticamente"}),Object(Se.jsx)("h4",{style:{display:"inline"},children:"Datos personales"}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Nombre",name:"nombre",placeholder:"Nombre*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Tel\xe9fono",name:"telefono",placeholder:"Tel\xe9fono*"})})]}),Object(Se.jsx)("h4",{className:"mt-4",children:"Direcci\xf3n de env\xedo"}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Direcci\xf3n",name:"direccion.calle",placeholder:"Direcci\xf3n*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Informaci\xf3n adicional",name:"direccion.numero",placeholder:"Piso, escalera, puerta, etc.*"})})]}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Pa\xeds",name:"direccion.pais",placeholder:"Pa\xeds*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"C\xf3digo postal",name:"direccion.codigo",placeholder:"C\xf3digo postal*"})})]}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Poblaci\xf3n",name:"direccion.poblacion",placeholder:"Poblaci\xf3n*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Ta,{label:"Provincia",name:"direccion.provincia",placeholder:"Provincia*"})})]}),Object(Se.jsxs)("div",{className:"mt-4 mb-4",children:[Object(Se.jsx)(Dt.a.Check,{defaultChecked:!0,type:"checkbox",id:"checkbox1",name:"checkbox1",label:"Establecer esta direcci\xf3n como predeterminada (para futuras compras)"}),Object(Se.jsx)(Dt.a.Check,{defaultChecked:!0,type:"checkbox",id:"checkbox2",name:"checkbox2",label:"Usar mismos datos de env\xedo para la facturaci\xf3n"})]},"checkbox-default"),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Guardar direcci\xf3n"})})]})}})},Da=["label","type"],Fa=function(e){var t=e.label,a=e.type,c=Object(K.a)(e,Da),r=Object(Y.c)(c),n=Object(J.a)(r,2),s=n[0],i=n[1];return Object(Se.jsxs)(Z.a,{className:"mt-2",children:[Object(Se.jsx)($.a,{htmlFor:c.id||c.name,children:t}),Object(Se.jsx)(Q.a,Object(l.a)(Object(l.a)({as:a},s),c)),i.touched&&i.error?Object(Se.jsx)(X.a,{className:"text-danger",children:i.error}):null]})},za=function(){var e=Object(n.b)(),t=Object(n.c)((function(e){return e.shipping})).facturacion;return Object(Se.jsx)(Y.b,{initialValues:{direccion:{poblacion:(null===t||void 0===t?void 0:t.poblacion)||"",pais:(null===t||void 0===t?void 0:t.pais)||"",calle:(null===t||void 0===t?void 0:t.calle)||"",numero:(null===t||void 0===t?void 0:t.numero)||"",codigo:(null===t||void 0===t?void 0:t.codigo)||"",provincia:(null===t||void 0===t?void 0:t.provincia)||""}},validationSchema:se.b({direccion:se.b({poblacion:se.c().required("Requerido"),pais:se.c().required("Requerido"),calle:se.c().required("Requerido"),numero:se.c().required("Requerido"),codigo:se.a().test("len","El c\xf3digo debe tener 5 n\xfameros",(function(e){return e&&5===e.toString().length})).required("Requerido"),provincia:se.c().required("Requerido")})}),onSubmit:function(t){var a=t.direccion;e(_a(a)),e(pe(!1))},children:function(e){var t=e.setFieldValue;return Object(Se.jsxs)(Y.a,{children:[Object(Se.jsx)(ce.a,{className:"float-end",variant:"warning",onClick:function(){return function(e){e("direccion.calle","Calle Marina"),e("direccion.numero","N\xfamero 7, 8\xba A"),e("direccion.pais","Espa\xf1a"),e("direccion.codigo","21003"),e("direccion.poblacion","Huelva"),e("direccion.provincia","Huelva")}(t)},children:"Rellenar autom\xe1ticamente"}),Object(Se.jsx)("h4",{style:{display:"inline"},children:"Direcci\xf3n de env\xedo"}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Fa,{label:"Direcci\xf3n",name:"direccion.calle",placeholder:"Direcci\xf3n*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Fa,{label:"Informaci\xf3n adicional",name:"direccion.numero",placeholder:"Piso, escalera, puerta, etc.*"})})]}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Fa,{label:"Pa\xeds",name:"direccion.pais",placeholder:"Pa\xeds*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Fa,{label:"C\xf3digo postal",name:"direccion.codigo",placeholder:"C\xf3digo postal*"})})]}),Object(Se.jsxs)(te.a,{className:"mt-2",children:[Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Fa,{label:"Poblaci\xf3n",name:"direccion.poblacion",placeholder:"Poblaci\xf3n*"})}),Object(Se.jsx)(ae.a,{children:Object(Se.jsx)(Fa,{label:"Provincia",name:"direccion.provincia",placeholder:"Provincia*"})})]}),Object(Se.jsx)("div",{className:"d-grid mt-4",children:Object(Se.jsx)(ce.a,{type:"submit",children:"Guardar direcci\xf3n"})})]})}})},Aa=function(e){var t=Object(n.c)((function(e){return e.ui})).elegirShippingModal;return Object(Se.jsxs)(tt.a,Object(l.a)(Object(l.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Se.jsx)(tt.a.Header,{closeButton:!0,children:Object(Se.jsx)(tt.a.Title,{id:"contained-modal-title-vcenter",children:t?"A\xf1adir direcci\xf3n de env\xedo":"A\xf1adir direcci\xf3n de facturaci\xf3n"})}),Object(Se.jsx)(tt.a.Body,{children:t?Object(Se.jsx)(Pa,{}):Object(Se.jsx)(za,{})}),Object(Se.jsx)(tt.a.Footer,{children:Object(Se.jsx)(ce.a,{onClick:e.onHide,children:"Cerrar"})})]}))},qa=function(){var e=Object(n.b)(),t=Object(W.h)(),a=Object(n.c)((function(e){return e.ui})).shippingModal,c=Object(n.c)((function(e){return e.auth})).nombre,r=Object(n.c)((function(e){return e.cart})).carrito,s=Object(n.c)((function(e){return e.shipping})),i=s.envio,o=s.facturacion,l=s.predeterminado;Object(G.useEffect)((function(){e(ue(2)),localStorage.setItem("step",2)}),[e]);var d=function(e,t){t.preventDefault(),document.getElementById(e).checked=!0},j=function(t){ne.a.fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s revertir esto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&e(t?function(e){return function(){var t=Object(le.a)(oe.a.mark((function t(a,c){var r,n,s;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c().auth.uid,t.prev=1,t.next=4,be("usuarios/envio/".concat(r),{idEnvio:e},"DELETE");case 4:return n=t.sent,t.next=7,n.json();case 7:(s=t.sent).msg?ne.a.fire("Error",s.msg,"error"):a(Ca(e)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(t):function(){var e=Object(le.a)(oe.a.mark((function e(t,a){var c,r,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a().auth.uid,e.prev=1,e.next=4,be("usuarios/facturacion/".concat(c),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:(n=e.sent).msg?ne.a.fire("Error",n.msg,"error"):t(Ea()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}())}))},b=function(t){if(t){e(fe(!0));var a=i.find((function(e){return e._id===t}));e(fa(a))}else e(fe(!1));e(pe(!0))};return Object(Se.jsxs)("div",{className:"animate__animated animate__fadeIn mb-4",children:[Object(Se.jsxs)("div",{className:"row",children:[Object(Se.jsxs)("div",{className:"col-12 col-md-7 col-lg-8",children:[Object(Se.jsx)("h4",{className:"mb-3",children:"Direcci\xf3n de env\xedo"}),Object(Se.jsx)(Dt.a,{children:Object(Se.jsx)(bt.a,{className:"todo-list",children:i.map((function(e){return Object(Se.jsx)(ut.a,{timeout:500,classNames:"item",children:Object(Se.jsxs)("div",{className:"row mt-1",children:[Object(Se.jsx)("div",{className:"col-12 col-lg-8",children:Object(Se.jsx)(Pe.a,{children:Object(Se.jsxs)(Pe.a.Item,{className:"border-0",action:!0,onClick:function(t){return d(e._id,t)},children:[l===e._id&&Object(Se.jsx)(Dt.a.Check,{defaultChecked:!0,type:"radio",id:e._id,label:e.nombre,name:"check_envio",style:{fontWeight:"bold",pointerEvents:"none"}}),l!==e._id&&Object(Se.jsx)(Dt.a.Check,{type:"radio",id:e._id,label:e.nombre,name:"check_envio",style:{fontWeight:"bold",pointerEvents:"none"}}),Object(Se.jsxs)("div",{className:"mb-3",children:[e.direccion.calle,", ",e.direccion.numero,", ",e.direccion.codigo,", ",e.direccion.poblacion,", ",e.direccion.provincia,", ",e.direccion.pais]})]})})}),Object(Se.jsxs)("div",{className:"col-12 col-lg-4 mb-4 mb-lg-0",style:{display:"flex",justifyContent:"right",alignItems:"center"},children:[Object(Se.jsx)(ce.a,{className:"me-1",style:{width:"80px"},variant:"outline-secondary",size:"sm",onClick:function(){return b(e._id)},children:"Editar"}),Object(Se.jsx)(ce.a,{className:"me-3",style:{width:"80px"},variant:"outline-secondary",size:"sm",onClick:function(){return j(e._id)},children:"Eliminar"})]}),Object(Se.jsx)("hr",{})]})},e._id)}))})}),Object(Se.jsx)(ce.a,{className:"mt-2 mb-5",variant:"primary",onClick:function(){e(fe(!0)),e(pe(!0))},children:0===i.length?Object(Se.jsx)("div",{children:"A\xf1adir direcci\xf3n"}):Object(Se.jsx)("div",{children:"A\xf1adir otra direcci\xf3n"})}),0!==i.length&&Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsx)("h4",{children:"Direcci\xf3n de facturaci\xf3n"}),Object(Se.jsx)(bt.a,{className:"todo-list",children:Object(Se.jsx)(ut.a,{timeout:500,classNames:"item",children:o?Object(Se.jsx)(Dt.a,{children:Object(Se.jsxs)("div",{className:"row mt-1",children:[Object(Se.jsx)("div",{className:"col-12 col-lg-8",children:Object(Se.jsx)(Pe.a,{children:Object(Se.jsxs)(Pe.a.Item,{className:"border-0",action:!0,onClick:function(e){return d(o._id,e)},children:[Object(Se.jsx)(Dt.a.Check,{defaultChecked:!0,type:"radio",id:o._id,label:c,name:"check_facturacion",style:{fontWeight:"bold",pointerEvents:"none"}}),Object(Se.jsxs)("div",{className:"mb-3",children:[o.calle,", ",o.numero,", ",o.codigo,", ",o.poblacion,", ",o.provincia,", ",o.pais]})]})})}),Object(Se.jsxs)("div",{className:"col-12 col-lg-4 mb-4 mb-lg-0",style:{display:"flex",justifyContent:"right",alignItems:"center"},children:[Object(Se.jsx)(ce.a,{className:"me-1",style:{width:"80px"},variant:"outline-secondary",size:"sm",onClick:function(){return b()},children:"Editar"}),Object(Se.jsx)(ce.a,{className:"me-3",style:{width:"80px"},variant:"outline-secondary",size:"sm",onClick:function(){return j()},children:"Eliminar"})]})]})}):Object(Se.jsx)(ce.a,{className:"mt-2 mb-5",variant:"primary",onClick:function(){e(fe(!1)),e(pe(!0))},children:"A\xf1adir direcci\xf3n"})})})]})]}),Object(Se.jsx)("div",{className:"col-12 col-md-5 col-lg-4",children:Object(Se.jsxs)(Qe.a,{children:[Object(Se.jsx)(Qe.a.Header,{as:"h5",className:"text-center",children:"TOTAL"}),Object(Se.jsxs)(Qe.a.Body,{className:"text-center",children:[Object(Se.jsxs)(Qe.a.Title,{children:[r.reduce((function(e,t){return e+t.unidades*t.producto.precio}),0).toFixed(2)," \u20ac"]}),Object(Se.jsx)("div",{className:"mt-4 d-grid gap-2",children:Object(Se.jsx)(ce.a,{className:"mt-1",variant:"warning",size:"lg",onClick:function(){if(document.querySelector("input[name=check_envio]:checked"))if(o){var a=document.querySelector("input[name=check_envio]:checked").id,c=i.find((function(e){return e._id===a}));e(ue(3)),localStorage.setItem("step",3),t("/payment",{state:{direccion:c,facturacion:o}})}else ne.a.fire("Error","No ha elegido una direcci\xf3n de facturaci\xf3n","error");else ne.a.fire("Error","No ha elegido una direcci\xf3n de env\xedo","error")},children:"Guardar y continuar"})})]})]})})]}),Object(Se.jsx)(Aa,{show:a,onHide:function(){e(pe(!1)),e(fa())}})]})},Ha=function(){var e=Object(n.b)(),t=Object(n.c)((function(e){return e.auth})).uid,a=Object(G.useState)(!1),c=Object(J.a)(a,2),r=c[0],s=c[1];return Object(G.useEffect)((function(){function a(){return(a=Object(le.a)(oe.a.mark((function a(){var c,r,n;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,be("usuarios/".concat(t));case 2:return c=a.sent,a.next=5,c.json();case 5:if(r=a.sent,n=r.usuario,e(pa(n.envio)),!n.facturacion){a.next=11;break}return a.next=11,e(_a(n.facturacion));case 11:e(ga(n.predeterminado)),s(!0);case 13:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e,t]),r&&Object(Se.jsx)(qa,{})},Ra=a(186),Ba=a(75),Ma=a(344),La=(a(330),function(){var e=Object(Ba.useStripe)(),t=Object(Ba.useElements)(),a=Object(G.useState)(null),c=Object(J.a)(a,2),r=c[0],n=c[1],s=Object(G.useState)(!1),i=Object(J.a)(s,2),o=i[0],l=i[1],d=Object(G.useState)("hidden"),j=Object(J.a)(d,2),b=j[0],u=j[1];Object(G.useEffect)((function(){if(e){var t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((function(e){switch(e.paymentIntent.status){case"succeeded":n("Payment succeeded!");break;case"processing":n("Your payment is processing.");break;case"requires_payment_method":n("Your payment was not successful, please try again.");break;default:n("Something went wrong.")}}))}}),[e]);var m=function(){var a=Object(le.a)(oe.a.mark((function a(c){var r,s;return oe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.preventDefault(),e&&t){a.next=3;break}return a.abrupt("return");case 3:return l(!0),a.next=6,e.confirmPayment({elements:t,confirmParams:{return_url:"".concat("https://ecommerce-carlosbarondev.herokuapp.com","/summary")}});case 6:r=a.sent,"card_error"===(s=r.error).type||"validation_error"===s.type?n(s.message):n("An unexpected error occured."),l(!1);case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(Se.jsx)(Se.Fragment,{children:Object(Se.jsxs)("form",{id:"payment-form",onSubmit:m,style:{visibility:b},children:[Object(Se.jsx)(Ba.PaymentElement,{id:"payment-element",onReady:function(){u("visible")}}),Object(Se.jsx)("button",{disabled:o||!e||!t,id:"submit",children:Object(Se.jsx)("span",{id:"button-text",children:o?Object(Se.jsx)("div",{className:"spinner",id:"spinner"}):"Confirmar pago"})}),r&&Object(Se.jsx)("div",{id:"payment-message",children:r})]})})}),Va=Object(Ra.a)("pk_test_51KZH9rK7t3f78Hp2q0mtyopW0RtVqrg0MxOhtmG7KCKeYZMyuEZjsrFrCcWEhSjB6rQY9EkAxBLoxB3fl6o0iMf400VxcbHZvO"),Ua=function(){var e=Object(W.g)().state,t=Object(n.c)((function(e){return e.auth})),a=t.uid,c=t.correo,r=Object(n.c)((function(e){return e.cart})).carrito,s=Object(G.useState)(""),i=Object(J.a)(s,2),o=i[0],l=i[1],d=Object(G.useState)(!1),j=Object(J.a)(d,2),b=j[0],u=j[1];Object(G.useEffect)((function(){be("pagos/".concat(a),{correo:c,direccion:e,items:r},"POST").then((function(e){return e.json()})).then((function(e){l(e.clientSecret),u(!0)}))}),[a,c,e,r]);var m={clientSecret:o,appearance:{theme:"stripe"}};return b?Object(Se.jsx)("div",{className:"d-flex justify-content-center mt-2 mt-sm-5 animate__animated animate__fadeIn mb-5",children:Object(Se.jsxs)(te.a,{children:[Object(Se.jsx)(ae.a,{xs:12,lg:5,className:"align-self-center mb-4",children:Object(Se.jsx)("div",{className:"d-flex justify-content-center",children:Object(Se.jsxs)("div",{children:[Object(Se.jsx)("h4",{children:"Tarjetas Test Stripe"}),Object(Se.jsxs)("ul",{children:[Object(Se.jsx)("li",{children:"La web utiliza Stripe como m\xe9todo de pago"}),Object(Se.jsx)("li",{children:Object(Se.jsx)("strong",{children:"Los pagos son reales"})}),Object(Se.jsx)("li",{children:"Stripe pone a disposici\xf3n  del usuario las siguientes tarjetas para realizar los test de funcionamiento"})]}),Object(Se.jsx)("div",{className:"d-flex justify-content-center",children:Object(Se.jsxs)(Pe.a,{className:"mt-3",children:[Object(Se.jsxs)(Pe.a.Item,{className:"border-0",children:[Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-check fa-xl me-2"})}),Object(Se.jsx)("b",{children:" El pago se efect\xfaa correctamente"})]}),Object(Se.jsxs)("div",{className:"mt-2 ms-5",children:["N\xfamero de tarjeta:",Object(Se.jsxs)("span",{className:"ms-4 float-end text-primary",children:["4242 4242 4242 4242",Object(Se.jsx)("button",{className:"ms-2 botonClipboard",onClick:function(){return e="4242 4242 4242 4242",void navigator.clipboard.writeText(e);var e},children:Object(Se.jsx)("i",{className:"fa-solid fa-clipboard"})})]})]}),Object(Se.jsxs)("div",{className:"ms-5",children:["Caducidad:",Object(Se.jsx)("span",{className:"float-end text-primary",children:"Cualquier fecha futura"})]}),Object(Se.jsxs)("div",{className:"ms-5",children:["CVC:",Object(Se.jsx)("span",{className:"float-end text-primary",children:"Cualquier n\xfamero CVC aleatorio"})]})]}),Object(Se.jsxs)(Pe.a.Item,{className:"border-0",children:[Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-exclamation fa-xl ms-1 me-2"})}),Object(Se.jsx)("b",{children:" El pago requiere autenticaci\xf3n"})]}),Object(Se.jsxs)("div",{className:"mt-2 ms-5",children:["N\xfamero de tarjeta:",Object(Se.jsx)("span",{className:"ms-4 float-end",children:Object(Se.jsx)("span",{children:"4000 0025 0000 3155"})})]}),Object(Se.jsxs)("div",{className:"ms-5",children:["Caducidad: ",Object(Se.jsx)("span",{className:"float-end",children:"Cualquier fecha futura"})]}),Object(Se.jsxs)("div",{className:"ms-5",children:["CVC: ",Object(Se.jsx)("span",{className:"float-end",children:"Cualquier n\xfamero CVC aleatorio"})]})]}),Object(Se.jsxs)(Pe.a.Item,{className:"border-0",children:[Object(Se.jsxs)("div",{className:"d-flex",children:[Object(Se.jsx)("div",{style:{width:"35px"},children:Object(Se.jsx)("i",{className:"fa-solid fa-xmark fa-xl me-2"})}),Object(Se.jsx)("b",{children:" Se rechaza el pago"})]}),Object(Se.jsxs)("div",{className:"mt-2 ms-5",children:["N\xfamero de tarjeta:",Object(Se.jsx)("span",{className:"ms-4 float-end",children:"4000 0000 0000 9995"})]}),Object(Se.jsxs)("div",{className:"ms-5",children:["Caducidad: ",Object(Se.jsx)("span",{className:"float-end",children:"Cualquier fecha futura"})]}),Object(Se.jsxs)("div",{className:"ms-5",children:["CVC: ",Object(Se.jsx)("span",{className:"float-end",children:"Cualquier n\xfamero CVC aleatorio"})]})]})]})})]})})}),Object(Se.jsx)(ae.a,{xs:12,lg:7,children:Object(Se.jsx)("div",{className:"d-flex justify-content-center mt-2 ms-4",children:Object(Se.jsx)("div",{className:"Checkout",children:o&&Object(Se.jsx)(Ba.Elements,{options:m,stripe:Va,children:Object(Se.jsx)(La,{})})})})})]})}):Object(Se.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"25rem"},children:Object(Se.jsx)(Ma.a,{animation:"border",role:"status",children:Object(Se.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},Ga=a(76),Wa=function(){var e=Object(n.b)(),t=Object(W.h)(),a=Object(n.c)((function(e){return e.ui})).step,c=Object(G.useState)(!1),r=Object(J.a)(c,2),s=r[0],i=r[1];Object(G.useEffect)((function(){e(ue(JSON.parse(localStorage.getItem("step")))),i(!0)}),[e]);var o=function(t){e(ue(t)),localStorage.setItem("step",t)};return s&&Object(Se.jsxs)(Ga.b,{activeStep:a,connectorStateColors:!0,children:[Object(Se.jsx)(Ga.a,{label:"Cesta",children:a>1?Object(Se.jsx)("div",{children:Object(Se.jsx)("i",{className:"fa-solid fa-check"})}):1,onClick:function(){t("/cart"),o(1)}}),Object(Se.jsx)(Ga.a,{label:"Direcci\xf3n de env\xedo",children:a>2?Object(Se.jsx)("div",{children:Object(Se.jsx)("i",{className:"fa-solid fa-check"})}):2,disabled:a<2,onClick:function(){t("/shipping"),o(2)}}),Object(Se.jsx)(Ga.a,{label:"M\xe9todo de pago",children:a>3?Object(Se.jsx)("div",{children:Object(Se.jsx)("i",{className:"fa-solid fa-check"})}):3,disabled:a<3,onClick:function(){t("/payment"),o(3)}}),Object(Se.jsx)(Ga.a,{label:"Resumen",children:a>4?Object(Se.jsx)("div",{children:Object(Se.jsx)("i",{className:"fa-solid fa-check"})}):4,disabled:a<4,onClick:function(){t("/summary"),o(4)}})]})},Ja=function(){var e=Object(n.b)(),t=Object(W.g)(),a=Object(n.c)((function(e){return e.auth})),c=a.checking,r=a.uid,s=Object(n.c)((function(e){return e.cart})).carrito;return Object(G.useEffect)((function(){e(function(){var e=Object(le.a)(oe.a.mark((function e(t){var a,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be("login/renew");case 2:return a=e.sent,e.next=5,a.json();case 5:(c=e.sent).msg?t(ke()):(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(ye({uid:c.uid,nombre:c.nombre,correo:c.correo,rol:c.rol,img:c.img,estado:c.estado})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(G.useEffect)((function(){var t=JSON.parse(localStorage.getItem("carrito"));t&&e({type:N,payload:t.carrito})}),[e]),Object(G.useEffect)((function(){window.scrollTo(0,0)}),[t]),!c&&Object(Se.jsxs)(W.d,{children:[Object(Se.jsx)(W.b,{path:"registro",element:Object(Se.jsx)(Te,{})}),Object(Se.jsx)(W.b,{path:"registro/*",element:Object(Se.jsx)(W.a,{to:"/"})}),Object(Se.jsx)(W.b,{path:"login",element:Object(Se.jsx)(ze,{})}),Object(Se.jsx)(W.b,{path:"/login/*",element:Object(Se.jsx)(W.a,{to:"/"})}),Object(Se.jsx)(W.b,{path:"shipping",element:Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsx)(Wa,{}),Object(Se.jsx)("div",{className:"container",children:Object(Se.jsx)(xt,{isAuthenticated:!!r,children:s.length>0?Object(Se.jsx)(Ha,{}):Object(Se.jsx)(W.a,{to:"/",replace:!0})})})]})}),Object(Se.jsx)(W.b,{path:"payment",element:Object(Se.jsxs)(Se.Fragment,{children:[Object(Se.jsx)(Wa,{}),Object(Se.jsx)("div",{className:"container",children:Object(Se.jsx)(xt,{isAuthenticated:!!r,children:s.length>0?Object(Se.jsx)(Ua,{}):Object(Se.jsx)(W.a,{to:"/",replace:!0})})})]})}),Object(Se.jsx)(W.b,{path:"panel/*",element:Object(Se.jsx)(xt,{isAuthenticated:!!r,children:Object(Se.jsx)(Oa,{})})}),Object(Se.jsx)(W.b,{path:"/*",element:Object(Se.jsx)(_t,{})})]})},Ka=function(){return Object(Se.jsx)(n.a,{store:U,children:Object(Se.jsx)(s.a,{children:Object(Se.jsx)(Ja,{})})})};r.a.render(Object(Se.jsx)(Ka,{}),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.0d6d131c.chunk.js.map